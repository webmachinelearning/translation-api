<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Translator and Language Detector APIs</title>
  <meta content="CG-DRAFT" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version b25686b9f, updated Fri Mar 14 14:15:20 2025 -0700" name="generator">
  <link href="https://webmachinelearning.github.io/translation-api" rel="canonical">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="a1caf652fcad7f4d7b6b67cbfb86e27a72e6c01a" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://webmachinelearning.github.io/"> <img alt="Logo" height="100" src="https://webmachinelearning.github.io/webmachinelearning-logo.png" width="100"> </a> </p>
   <h1 class="p-name no-ref" id="title">Translator and Language Detector APIs</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2025-04-21">21 April 2025</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://webmachinelearning.github.io/translation-api">https://webmachinelearning.github.io/translation-api</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/webmachinelearning/translation-api/issues/">GitHub</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org" href="https://google.com">Google</a>) <a class="u-email email" href="mailto:d@domenic.me">d@domenic.me</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 the Contributors to the Translator and Language Detector APIs Specification, published by the <a href="https://www.w3.org/community/webmachinelearning/">Web Machine Learning Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The translator and language detector APIs gives web pages the ability to translate text between languages, and detect the language of such text.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/webmachinelearning/">Web Machine Learning Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#dependencies"><span class="secno">2</span> <span class="content">Dependencies</span></a>
    <li>
     <a href="#translator-api"><span class="secno">3</span> <span class="content">The translator API</span></a>
     <ol class="toc">
      <li><a href="#translator-creation"><span class="secno">3.1</span> <span class="content">Creation</span></a>
      <li><a href="#translator-availability"><span class="secno">3.2</span> <span class="content">Availability</span></a>
      <li><a href="#the-Translator-class"><span class="secno">3.3</span> <span class="content">The <code class="idl"><span>Translator</span></code> class</span></a>
      <li>
       <a href="#translator-translation"><span class="secno">3.4</span> <span class="content">Translation</span></a>
       <ol class="toc">
        <li><a href="#translator-algorithm"><span class="secno">3.4.1</span> <span class="content">The algorithm</span></a>
        <li><a href="#translator-usage"><span class="secno">3.4.2</span> <span class="content">Usage</span></a>
        <li><a href="#translator-errors"><span class="secno">3.4.3</span> <span class="content">Errors</span></a>
       </ol>
      <li><a href="#translator-permissions-policy"><span class="secno">3.5</span> <span class="content">Permissions policy integration</span></a>
     </ol>
    <li>
     <a href="#language-detector-api"><span class="secno">4</span> <span class="content">The language detector API</span></a>
     <ol class="toc">
      <li><a href="#language-detector-creation"><span class="secno">4.1</span> <span class="content">Creation</span></a>
      <li><a href="#language-detector-availability"><span class="secno">4.2</span> <span class="content">Availability</span></a>
      <li><a href="#the-LanguageDetector-class"><span class="secno">4.3</span> <span class="content">The <code class="idl"><span>LanguageDetector</span></code> class</span></a>
      <li>
       <a href="#language-detector-language-detection"><span class="secno">4.4</span> <span class="content">Language detection</span></a>
       <ol class="toc">
        <li><a href="#language-detector-algorithm"><span class="secno">4.4.1</span> <span class="content">The algorithm</span></a>
        <li><a href="#language-detector-usage"><span class="secno">4.4.2</span> <span class="content">Usage</span></a>
        <li><a href="#language-detector-errors"><span class="secno">4.4.3</span> <span class="content">Errors</span></a>
       </ol>
      <li><a href="#language-detector-permissions-policy"><span class="secno">4.5</span> <span class="content">Permissions policy integration</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>The translator and language detector APIs expose the ability to translate text between human languages, and detect the language of such text. They are complementary to any built-in browser UI features for these purposes, giving web developers the ability to trigger these operations programmatically and integrate them into their applications. This can be especially useful for operating on user input, or text retrieved from the network.</p>
   <p>These APIs are designed to provide a high-level interface for translation and language detection, abstracting away the complexities of underlying machine learning models and their management. To deal with possible interoperability issues arising from different implementation strategies or language support, the API design guides developers toward checking the availability of languages their applications are dependent on, and including appropriate error-handling.</p>
   <h2 class="heading settled" data-level="2" id="dependencies"><span class="secno">2. </span><span class="content">Dependencies</span><a class="self-link" href="#dependencies"></a></h2>
   <p>This specification depends on the Infra Standard. <a data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a></p>
   <p>As with the rest of the web platform, human languages are identified in these APIs by BCP 47 language tags, such as "<code>ja</code>", "<code>en-US</code>", "<code>sr-Cyrl</code>", or "<code>de-CH-1901-x-phonebk-extended</code>". The specific algorithms used for validation, canonicalization, and language tag matching are those from the <cite>ECMAScript Internationalization API Specification</cite>, which in turn defers some of its processing to <cite>Unicode Locale Data Markup Language (LDML)</cite>. <a data-link-type="biblio" href="#biblio-bcp47" title="Tags for Identifying Languages">[BCP47]</a> <a data-link-type="biblio" href="#biblio-ecma-402" title="ECMAScript Internationalization API Specification">[ECMA-402]</a> <a data-link-type="biblio" href="#biblio-uts35" title="Unicode Locale Data Markup Language (LDML)">[UTS35]</a>.</p>
   <p>These APIs are part of a family of APIs expected to be powered by machine learning models, which share common API surface idioms and specification patterns. Currently, the specification text for these shared parts lives in <a href="https://webmachinelearning.github.io/writing-assistance-apis/#supporting"><cite>Writing Assistance APIs</cite> § 5 Shared infrastructure</a>. Implementing these APIs requires implementing that shared infrastructure, but does not require implementing or exposing the actual writing assistance APIs. <a data-link-type="biblio" href="#biblio-writing-assistance-apis" title="Writing Assistance APIs">[WRITING-ASSISTANCE-APIS]</a></p>
   <h2 class="heading settled" data-level="3" id="translator-api"><span class="secno">3. </span><span class="content">The translator API</span><a class="self-link" href="#translator-api"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="translator"><code><c- g>Translator</c-></code></dfn> {
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#translator" id="ref-for-translator"><c- n>Translator</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-create" id="ref-for-dom-translator-create"><c- g>create</c-></a>(<a data-link-type="idl-name" href="#dictdef-translatorcreateoptions" id="ref-for-dictdef-translatorcreateoptions"><c- n>TranslatorCreateOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/create(options)" data-dfn-type="argument" data-export id="dom-translator-create-options-options"><code><c- g>options</c-></code></dfn>);
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability"><c- n>Availability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-availability" id="ref-for-dom-translator-availability"><c- g>availability</c-></a>(<a data-link-type="idl-name" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions"><c- n>TranslatorCreateCoreOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/availability(options)" data-dfn-type="argument" data-export id="dom-translator-availability-options-options"><code><c- g>options</c-></code></dfn>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-translate" id="ref-for-dom-translator-translate"><c- g>translate</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/translate(input, options), Translator/translate(input)" data-dfn-type="argument" data-export id="dom-translator-translate-input-options-input"><code><c- g>input</c-></code></dfn>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions" id="ref-for-dictdef-translatortranslateoptions"><c- n>TranslatorTranslateOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/translate(input, options), Translator/translate(input)" data-dfn-type="argument" data-export id="dom-translator-translate-input-options-options"><code><c- g>options</c-></code></dfn> = {}
  );
  <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#readablestream" id="ref-for-readablestream"><c- n>ReadableStream</c-></a> <a class="idl-code" data-link-type="method" href="#dom-translator-translatestreaming" id="ref-for-dom-translator-translatestreaming"><c- g>translateStreaming</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/translateStreaming(input, options), Translator/translateStreaming(input)" data-dfn-type="argument" data-export id="dom-translator-translatestreaming-input-options-input"><code><c- g>input</c-></code></dfn>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions" id="ref-for-dictdef-translatortranslateoptions①"><c- n>TranslatorTranslateOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/translateStreaming(input, options), Translator/translateStreaming(input)" data-dfn-type="argument" data-export id="dom-translator-translatestreaming-input-options-options"><code><c- g>options</c-></code></dfn> = {}
  );

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-translator-sourcelanguage" id="ref-for-dom-translator-sourcelanguage"><c- g>sourceLanguage</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-translator-targetlanguage" id="ref-for-dom-translator-targetlanguage"><c- g>targetLanguage</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-measureinputusage" id="ref-for-dom-translator-measureinputusage"><c- g>measureInputUsage</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/measureInputUsage(input, options), Translator/measureInputUsage(input)" data-dfn-type="argument" data-export id="dom-translator-measureinputusage-input-options-input"><code><c- g>input</c-></code></dfn>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions" id="ref-for-dictdef-translatortranslateoptions②"><c- n>TranslatorTranslateOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Translator/measureInputUsage(input, options), Translator/measureInputUsage(input)" data-dfn-type="argument" data-export id="dom-translator-measureinputusage-input-options-options"><code><c- g>options</c-></code></dfn> = {}
  );
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unrestricted double" href="#dom-translator-inputquota" id="ref-for-dom-translator-inputquota"><c- g>inputQuota</c-></a>;
};
<a data-link-type="idl-name" href="#translator" id="ref-for-translator①"><c- n>Translator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel" id="ref-for-destroyablemodel"><c- n>DestroyableModel</c-></a>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-translatorcreatecoreoptions"><code><c- g>TranslatorCreateCoreOptions</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TranslatorCreateCoreOptions" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-translatorcreatecoreoptions-sourcelanguage"><code><c- g>sourceLanguage</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TranslatorCreateCoreOptions" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-translatorcreatecoreoptions-targetlanguage"><code><c- g>targetLanguage</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-translatorcreateoptions"><code><c- g>TranslatorCreateOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions①"><c- n>TranslatorCreateCoreOptions</c-></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TranslatorCreateOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-translatorcreateoptions-signal"><code><c- g>signal</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback" id="ref-for-callbackdef-createmonitorcallback"><c- n>CreateMonitorCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TranslatorCreateOptions" data-dfn-type="dict-member" data-export data-type="CreateMonitorCallback" id="dom-translatorcreateoptions-monitor"><code><c- g>monitor</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-translatortranslateoptions"><code><c- g>TranslatorTranslateOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="TranslatorTranslateOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-translatortranslateoptions-signal"><code><c- g>signal</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="3.1" id="translator-creation"><span class="secno">3.1. </span><span class="content">Creation</span><a class="self-link" href="#translator-creation"></a></h3>
   <div class="algorithm" data-algorithm="create(options)" data-algorithm-for="Translator">
     The static <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="method" data-export id="dom-translator-create"><code>create(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#create-an-ai-model-object" id="ref-for-create-an-ai-model-object">creating an AI model object</a> given <var>options</var>, "<code class="idl"><a data-link-type="idl" href="#permissiondef-translator" id="ref-for-permissiondef-translator">translator</a></code>", <a data-link-type="dfn" href="#validate-and-canonicalize-translator-options" id="ref-for-validate-and-canonicalize-translator-options">validate and canonicalize translator options</a>, <a data-link-type="dfn" href="#compute-translator-options-availability" id="ref-for-compute-translator-options-availability">compute translator options availability</a>, <a data-link-type="dfn" href="#download-the-translation-model" id="ref-for-download-the-translation-model">download the translation model</a>, <a data-link-type="dfn" href="#initialize-the-translation-model" id="ref-for-initialize-the-translation-model">initialize the translation model</a>, and <a data-link-type="dfn" href="#create-the-translator-object" id="ref-for-create-the-translator-object">create the translator object</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate and canonicalize translator options">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-and-canonicalize-translator-options">validate and canonicalize translator options</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions②">TranslatorCreateCoreOptions</a></code> <var>options</var>, perform the following steps. They mutate <var>options</var> in place to canonicalize language tags, and throw an exception if any are invalid. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags" id="ref-for-validate-and-canonicalize-language-tags">Validate and canonicalize language tags</a> given <var>options</var> and "<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage">sourceLanguage</a></code>".</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags" id="ref-for-validate-and-canonicalize-language-tags①">Validate and canonicalize language tags</a> given <var>options</var> and "<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage">targetLanguage</a></code>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="download the translation model">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="download-the-translation-model">download the translation model</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions③">TranslatorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: these steps are running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>.</p>
     <li data-md>
      <p>Initiate the download process for everything the user agent needs to translate text from <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage①">sourceLanguage</a></code>"] to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage①">targetLanguage</a></code>"].</p>
      <p>This could include both a base translation model and specific language arc material, or perhaps material for multiple language arcs if an intermediate language is used.</p>
     <li data-md>
      <p>If the download process cannot be started for any reason, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="initialize the translation model">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initialize-the-translation-model">initialize the translation model</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions④">TranslatorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: these steps are running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>.</p>
     <li data-md>
      <p>Perform any necessary initialization operations for the AI model backing the user agent’s capabilities for translating from <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage②">sourceLanguage</a></code>"] to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage②">targetLanguage</a></code>"].</p>
      <p>This could include loading the model into memory, or loading any fine-tunings necessary to support the specific options in question.</p>
     <li data-md>
      <p>If initialization failed for any reason, then return a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information">DOMException error information</a> whose <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-name" id="ref-for-domexception-error-information-name">name</a> is "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror">OperationError</a></code>" and whose <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-details" id="ref-for-domexception-error-information-details">details</a> contain appropriate detail.</p>
     <li data-md>
      <p>Return null.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="create the translator object">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-the-translator-object">create the translator object</dfn>, given a <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm" id="ref-for-realm">realm</a> <var>realm</var> and a <code class="idl"><a data-link-type="idl" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions⑤">TranslatorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: these steps are running on <var>realm</var>’s <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#surrounding-agent" id="ref-for-surrounding-agent">surrounding agent</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop" id="ref-for-concept-agent-event-loop">event loop</a>.</p>
     <li data-md>
      <p>Let <var>inputQuota</var> be the amount of input quota that is available to the user agent for future <a data-link-type="dfn" href="#translate" id="ref-for-translate">translation</a> operations. (This value is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a>, and may be +∞ if there are no specific limits beyond, e.g., the user’s memory, or the limits of JavaScript strings.)</p>
     <li data-md>
      <p>Return a new <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator②">Translator</a></code> object, created in <var>realm</var>, with</p>
      <dl class="props">
       <dt data-md><a data-link-type="dfn" href="#translator-source-language" id="ref-for-translator-source-language">source language</a>
       <dd data-md>
        <p><var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage③">sourceLanguage</a></code>"]</p>
       <dt data-md><a data-link-type="dfn" href="#translator-target-language" id="ref-for-translator-target-language">target language</a>
       <dd data-md>
        <p><var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage③">targetLanguage</a></code>"]</p>
       <dt data-md><a data-link-type="dfn" href="#translator-input-quota" id="ref-for-translator-input-quota">input quota</a>
       <dd data-md>
        <p><var>inputQuota</var></p>
      </dl>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.2" id="translator-availability"><span class="secno">3.2. </span><span class="content">Availability</span><a class="self-link" href="#translator-availability"></a></h3>
   <div class="algorithm" data-algorithm="availability(options)" data-algorithm-for="Translator">
     The static <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="method" data-export id="dom-translator-availability"><code>availability(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#compute-ai-model-availability" id="ref-for-compute-ai-model-availability">computing AI model availability</a> given <var>options</var>, "<code class="idl"><a data-link-type="idl" href="#permissiondef-translator" id="ref-for-permissiondef-translator①">translator</a></code>", <a data-link-type="dfn" href="#validate-and-canonicalize-translator-options" id="ref-for-validate-and-canonicalize-translator-options①">validate and canonicalize translator options</a>, and <a data-link-type="dfn" href="#compute-translator-options-availability" id="ref-for-compute-translator-options-availability①">compute translator options availability</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="compute translator options availability">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-translator-options-availability">compute translator options availability</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-translatorcreatecoreoptions" id="ref-for-dictdef-translatorcreatecoreoptions⑥">TranslatorCreateCoreOptions</a></code> <var>options</var>, perform the following steps. They return either an <code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability①">Availability</a></code> value or null, and they mutate <var>options</var> in place to update language tags to their best-fit matches. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>.</p>
     <li data-md>
      <p>Let <var>availabilities</var> be the user agent’s <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities">translator language arc availabilities</a>.</p>
     <li data-md>
      <p>If <var>availabilities</var> is null, then return null.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>languageArc</var> → <var>availability</var> in <var>availabilities</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>sourceLanguageBestFit</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a>(« <var>languageArc</var>’s <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language">source language</a> », « <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage④">sourceLanguage</a></code>"] »).</p>
       <li data-md>
        <p>Let <var>targetLanguageBestFit</var> be <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit①">LookupMatchingLocaleByBestFit</a>(« <var>languageArc</var>’s <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language">target language</a> », « <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage④">targetLanguage</a></code>"] »).</p>
       <li data-md>
        <p>If <var>sourceLanguageBestFit</var> and <var>targetLanguageBestFit</var> are both not undefined, then:</p>
        <ol>
         <li data-md>
          <p>Set <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage⑤">sourceLanguage</a></code>"] to <var>sourceLanguageBestFit</var>.[[locale]].</p>
         <li data-md>
          <p>Set <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage⑤">targetLanguage</a></code>"] to <var>targetLanguageBestFit</var>.[[locale]].</p>
         <li data-md>
          <p>Return <var>availability</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If (<var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage⑥">sourceLanguage</a></code>"], <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage⑥">targetLanguage</a></code>"]) <a data-link-type="dfn" href="#language-arc-can-be-fulfilled-by-the-identity-translation" id="ref-for-language-arc-can-be-fulfilled-by-the-identity-translation">can be fulfilled by the identity translation</a>, then return "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available" id="ref-for-dom-availability-available">available</a></code>".</p>
      <p class="note" role="note">Such cases could also return "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable" id="ref-for-dom-availability-downloadable">downloadable</a></code>", "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloading" id="ref-for-dom-availability-downloading">downloading</a></code>", or "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available" id="ref-for-dom-availability-available①">available</a></code>" because of the above steps, if the user agent has specific entries in its <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities①">translator language arc availabilities</a> for the given language arc. However, the identity translation is always available, so this step ensures that we never return "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-unavailable" id="ref-for-dom-availability-unavailable">unavailable</a></code>" for such cases. </p>
      <div class="example" id="example-identity-translation">
       <a class="self-link" href="#example-identity-translation"></a> 
       <p>One <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc">language arc</a> that <a data-link-type="dfn" href="#language-arc-can-be-fulfilled-by-the-identity-translation" id="ref-for-language-arc-can-be-fulfilled-by-the-identity-translation①">can be fulfilled by the identity translation</a> is (<code>"en-US"</code>, <code>"en-GB"</code>). It is conceivable that an implementation might support a specialized model for this translation, which would show up in the <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities②">translator language arc availabilities</a>. </p>
       <p>On the other hand, it’s pretty unlikely that an implementation has any specialized model for the <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①">language arc</a> ("<code>en-x-asdf</code>", "<code>en-x-xyzw</code>"). In such a case, this step takes over, and later calls to the <a data-link-type="dfn" href="#translate" id="ref-for-translate①">translate</a> algorithm will use the identity translation. </p>
       <p>Note that when this step takes over, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-sourcelanguage" id="ref-for-dom-translatorcreatecoreoptions-sourcelanguage⑦">sourceLanguage</a></code>"] and <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-translatorcreatecoreoptions-targetlanguage" id="ref-for-dom-translatorcreatecoreoptions-targetlanguage⑦">targetLanguage</a></code>"] are not modified, so if this algorithm is being called from <code class="idl"><a data-link-type="idl" href="#dom-translator-create" id="ref-for-dom-translator-create①">create()</a></code>, that means the resulting <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator③">Translator</a></code> object’s <code class="idl"><a data-link-type="idl" href="#dom-translator-sourcelanguage" id="ref-for-dom-translator-sourcelanguage①">sourceLanguage</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-translator-targetlanguage" id="ref-for-dom-translator-targetlanguage①">targetLanguage</a></code> properties will return the original inputs, and not some canonicalized form. </p>
      </div>
     <li data-md>
      <p>Return "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-unavailable" id="ref-for-dom-availability-unavailable①">unavailable</a></code>".</p>
    </ol>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="language-arc">language arc</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> of two strings, a <dfn class="dfn-paneled" data-dfn-for="language arc" data-dfn-type="dfn" data-noexport id="language-arc-source-language">source language</dfn> and a <dfn class="dfn-paneled" data-dfn-for="language arc" data-dfn-type="dfn" data-noexport id="language-arc-target-language">target language</dfn>. Each item is a <a data-link-type="dfn" href="https://tc39.es/ecma402/#sec-language-tags" id="ref-for-sec-language-tags">Unicode canonicalized locale identifier</a>.</p>
   <div class="algorithm" data-algorithm="translator language arc availabilities">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="translator-language-arc-availabilities">translator language arc availabilities</dfn> are given by the following steps. They return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a> from <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc②">language arcs</a> to <code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability②">Availability</a></code> values, or null. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert④">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel③">in parallel</a>.</p>
     <li data-md>
      <p>If there is some error attempting to determine what language arcs the user agent supports translating text between, which the user agent believes to be transient (such that re-querying the <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities③">translator language arc availabilities</a> could stop producing such an error), then return null.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a> from <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc③">language arcs</a> to <code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability③">Availability</a></code> values, where each key is a <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc④">language arc</a> that the user agent supports translating text between, filled according to the following constraints:</p>
      <ul>
       <li data-md>
        <p>If the user agent supports translating text from the <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language①">source language</a> to the <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language①">target language</a> of the <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc⑤">language arc</a> without performing any downloading operations, then the map must contain an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry">entry</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key">key</a> is that <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc⑥">language arc</a> and whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value">value</a> is "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available" id="ref-for-dom-availability-available②">available</a></code>".</p>
       <li data-md>
        <p>If the user agent supports translating text from the <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language②">source language</a> to the <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language②">target language</a> of the <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc⑦">language arc</a>, but only after finishing a currently-ongoing download, then the map must contain an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry①">entry</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key①">key</a> is that <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc⑧">language arc</a> and whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value①">value</a> is "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloading" id="ref-for-dom-availability-downloading①">downloading</a></code>".</p>
       <li data-md>
        <p>If the user agent supports translating text from the <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language③">source language</a> to the <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language③">target language</a> of the <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc⑨">language arc</a>, but only after performing a not-currently ongoing download, then the map must contain an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry②">entry</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key②">key</a> is that <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①⓪">language arc</a> and whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value②">value</a> is "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable" id="ref-for-dom-availability-downloadable①">downloadable</a></code>".</p>
       <li data-md>
        <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys">keys</a> must not include any <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①①">language arcs</a> that <a data-link-type="dfn" href="#language-arc-overlaps" id="ref-for-language-arc-overlaps">overlap</a> with the other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys①">keys</a>.</p>
      </ul>
    </ol>
   </div>
   <div class="example" id="example-language-arc-support">
    <a class="self-link" href="#example-language-arc-support"></a> Let’s suppose that the user agent’s <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities④">translator language arc availabilities</a> are as follows: 
    <ul>
     <li data-md>
      <p>("<code>en</code>", "<code>zh-Hans</code>") → "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available" id="ref-for-dom-availability-available③">available</a></code>"</p>
     <li data-md>
      <p>("<code>en</code>", "<code>zh-Hant</code>") → "<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable" id="ref-for-dom-availability-downloadable②">downloadable</a></code>"</p>
    </ul>
    <p>The use of <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit②">LookupMatchingLocaleByBestFit</a> means that <code class="idl"><a data-link-type="idl" href="#dom-translator-availability" id="ref-for-dom-translator-availability①">availability()</a></code> will probably give the following answers:</p>
<pre class="language-js highlight"><c- a>function</c-> a<c- p>(</c->sourceLanguage<c- p>,</c-> targetLanguage<c- p>)</c-> <c- p>{</c->
  <c- k>return</c-> ai<c- p>.</c->translator<c- p>.</c->availability<c- p>({</c-> sourceLanguage<c- p>,</c-> targetLanguage <c- p>})</c-><c- o>:</c->
<c- p>}</c->

<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-Hans"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"available"</c-><c- p>;</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-Hant"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"downloadable"</c-><c- p>;</c->

<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"available"</c-><c- p>;</c->            <c- c1>// zh will best-fit to zh-Hans</c->

<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-TW"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"downloadable"</c-><c- p>;</c->      <c- c1>// zh-TW will best-fit to zh-Hant</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-HK"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"available"</c-><c- p>;</c->         <c- c1>// zh-HK will best-fit to zh-Hans</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-CN"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"available"</c-><c- p>;</c->         <c- c1>// zh-CN will best-fit to zh-Hans</c->

<c- k>await</c-> a<c- p>(</c-><c- u>"en-US"</c-><c- p>,</c-> <c- u>"zh-Hant"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"downloadable"</c-><c- p>;</c-> <c- c1>// en-US will best-fit to en</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en-GB"</c-><c- p>,</c-> <c- u>"zh-Hant"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"downloadable"</c-><c- p>;</c-> <c- c1>// en-GB will best-fit to en</c->

<c- c1>// Even very unexpected subtags will best-fit to en or zh-Hans</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en-Braille-x-lolcat"</c-><c- p>,</c-> <c- u>"zh-Hant"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"downloadable"</c-><c- p>;</c->
<c- k>await</c-> a<c- p>(</c-><c- u>"en"</c-><c- p>,</c-> <c- u>"zh-BR-Kana"</c-><c- p>)</c-> <c- o>===</c-> <c- u>"available"</c-><c- p>;</c->
</pre>
   </div>
   <div class="algorithm" data-algorithm="overlaps" data-algorithm-for="language arc">
     A <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①②">language arc</a> <var>arc</var> <dfn class="dfn-paneled" data-dfn-for="language arc" data-dfn-type="dfn" data-noexport id="language-arc-overlaps">overlaps</dfn> with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> of <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①③">language arcs</a> <var>otherArcs</var> if the following steps return true: 
    <ol>
     <li data-md>
      <p>Let <var>sourceLanguages</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">set</a> composed of the <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language④">source languages</a> of each <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">item</a> in <var>otherArcs</var>.</p>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit③">LookupMatchingLocaleByBestFit</a>(<var>sourceLanguages</var>, « <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language⑤">source language</a> ») is not undefined, then return true.</p>
     <li data-md>
      <p>Let <var>targetLanguages</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a> composed of the <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language④">target languages</a> of each <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item①">item</a> in <var>otherArcs</var>.</p>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit④">LookupMatchingLocaleByBestFit</a>(<var>targetLanguages</var>, « <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language⑤">target language</a> ») is not undefined, then return true.</p>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <div class="example" id="example-language-arc-overlap">
    <a class="self-link" href="#example-language-arc-overlap"></a> The <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①④">language arc</a> ("<code>en</code>", "<code>fr</code>") <a data-link-type="dfn" href="#language-arc-overlaps" id="ref-for-language-arc-overlaps①">overlaps</a> with « ("<code>en</code>", "<code>fr-CA</code>") », so the user agent’s <a data-link-type="dfn" href="#translator-language-arc-availabilities" id="ref-for-translator-language-arc-availabilities⑤">translator language arc availabilities</a> cannot contain both of these <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①⑤">language arcs</a> at the same time. 
    <p>Instead, a typical user agent will either support only one English-to-French language arc (presumably ("<code>en</code>", "<code>fr</code>")), or it could support multiple non-overlapping English-to-French language arcs, such as ("<code>en</code>", "<code>fr-FR</code>"), ("<code>en</code>", "<code>fr-CA</code>"), and ("<code>en</code>", "<code>fr-CH</code>").</p>
    <p>In the latter case, if the web developer requested to create a translator using <code class="highlight">ai<c- p>.</c->translator<c- p>.</c->create<c- p>({</c-> sourceLanguage<c- o>:</c-> <c- u>"en"</c-><c- p>,</c-> targetLanguage<c- o>:</c-> <c- u>"fr"</c-> <c- p>})</c-></code>, the <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit⑤">LookupMatchingLocaleByBestFit</a> algorithm would choose one of the three possible language arcs to use (presumably ("<code>en</code>", "<code>fr-FR</code>")).</p>
   </div>
   <div class="algorithm" data-algorithm="can be fulfilled by the identity translation" data-algorithm-for="language arc">
     A <a data-link-type="dfn" href="#language-arc" id="ref-for-language-arc①⑥">language arc</a> <var>arc</var> <dfn class="dfn-paneled" data-dfn-for="language arc" data-dfn-type="dfn" data-noexport id="language-arc-can-be-fulfilled-by-the-identity-translation">can be fulfilled by the identity translation</dfn> if the following steps return true: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit⑥">LookupMatchingLocaleByBestFit</a>(« <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language⑥">source language</a> », « <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language⑥">target language</a> ») is not undefined, then return true.</p>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit" id="ref-for-sec-lookupmatchinglocalebybestfit⑦">LookupMatchingLocaleByBestFit</a>(« <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-target-language" id="ref-for-language-arc-target-language⑦">target language</a> », « <var>arc</var>’s <a data-link-type="dfn" href="#language-arc-source-language" id="ref-for-language-arc-source-language⑦">source language</a> ») is not undefined, then return true.</p>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.3" id="the-Translator-class"><span class="secno">3.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator④">Translator</a></code> class</span><a class="self-link" href="#the-Translator-class"></a></h3>
   <p>Every <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator⑤">Translator</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Translator" data-dfn-type="dfn" data-noexport id="translator-source-language">source language</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>, set during creation.</p>
   <p>Every <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator⑥">Translator</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Translator" data-dfn-type="dfn" data-noexport id="translator-target-language">target language</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a>, set during creation.</p>
   <p>Every <code class="idl"><a data-link-type="idl" href="#translator" id="ref-for-translator⑦">Translator</a></code> has an <dfn class="dfn-paneled" data-dfn-for="Translator" data-dfn-type="dfn" data-noexport id="translator-input-quota">input quota</dfn>, a number, set during creation.</p>
   <hr>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="attribute" data-export id="dom-translator-sourcelanguage"><code>sourceLanguage</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>’s <a data-link-type="dfn" href="#translator-source-language" id="ref-for-translator-source-language①">source language</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="attribute" data-export id="dom-translator-targetlanguage"><code>targetLanguage</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>’s <a data-link-type="dfn" href="#translator-target-language" id="ref-for-translator-target-language①">target language</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="attribute" data-export id="dom-translator-inputquota"><code>inputQuota</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>’s <a data-link-type="dfn" href="#translator-input-quota" id="ref-for-translator-input-quota①">input quota</a>.</p>
   <hr>
   <div class="algorithm" data-algorithm="translate(input, options)" data-algorithm-for="Translator">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="method" data-export data-lt="translate(input, options)|translate(input)" id="dom-translator-translate"><code>translate(<var>input</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>operation</var> be an algorithm step which takes arguments <var>chunkProduced</var>, <var>done</var>, <var>error</var>, and <var>stopProducing</var>, and <a data-link-type="dfn" href="#translate" id="ref-for-translate②">translates</a> <var>input</var> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>’s <a data-link-type="dfn" href="#translator-source-language" id="ref-for-translator-source-language②">source language</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>’s <a data-link-type="dfn" href="#translator-target-language" id="ref-for-translator-target-language②">target language</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>’s <a data-link-type="dfn" href="#translator-input-quota" id="ref-for-translator-input-quota②">input quota</a>, <var>chunkProduced</var>, <var>done</var>, <var>error</var>, and <var>stopProducing</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#get-an-aggregated-ai-model-result" id="ref-for-get-an-aggregated-ai-model-result">getting an aggregated AI model result</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>, <var>options</var>, and <var>operation</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="translateStreaming(input, options)" data-algorithm-for="Translator">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="method" data-export data-lt="translateStreaming(input, options)|translateStreaming(input)" id="dom-translator-translatestreaming"><code>translateStreaming(<var>input</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>operation</var> be an algorithm step which takes arguments <var>chunkProduced</var>, <var>done</var>, <var>error</var>, and <var>stopProducing</var>, and <a data-link-type="dfn" href="#translate" id="ref-for-translate③">translates</a> <var>input</var> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>’s <a data-link-type="dfn" href="#translator-source-language" id="ref-for-translator-source-language③">source language</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>’s <a data-link-type="dfn" href="#translator-target-language" id="ref-for-translator-target-language③">target language</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>’s <a data-link-type="dfn" href="#translator-input-quota" id="ref-for-translator-input-quota③">input quota</a>, <var>chunkProduced</var>, <var>done</var>, <var>error</var>, and <var>stopProducing</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#get-a-streaming-ai-model-result" id="ref-for-get-a-streaming-ai-model-result">getting a streaming AI model result</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>, <var>options</var>, and <var>operation</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="measureInputUsage(input, options)" data-algorithm-for="Translator">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="Translator" data-dfn-type="method" data-export data-lt="measureInputUsage(input, options)|measureInputUsage(input)" id="dom-translator-measureinputusage"><code>measureInputUsage(<var>input</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>measureUsage</var> be an algorithm step which takes argument <var>stopMeasuring</var>, and returns the result of <a data-link-type="dfn" href="#measure-translator-input-usage" id="ref-for-measure-translator-input-usage">measuring translator input usage</a> given <var>input</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>’s <a data-link-type="dfn" href="#translator-source-language" id="ref-for-translator-source-language④">source language</a>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>’s <a data-link-type="dfn" href="#translator-target-language" id="ref-for-translator-target-language④">target language</a>, and <var>stopMeasuring</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#measure-ai-model-input-usage" id="ref-for-measure-ai-model-input-usage">measuring AI model input usage</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>, <var>options</var>, and <var>measureUsage</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.4" id="translator-translation"><span class="secno">3.4. </span><span class="content">Translation</span><a class="self-link" href="#translator-translation"></a></h3>
   <h4 class="heading settled" data-level="3.4.1" id="translator-algorithm"><span class="secno">3.4.1. </span><span class="content">The algorithm</span><a class="self-link" href="#translator-algorithm"></a></h4>
   <div class="algorithm" data-algorithm="translate">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="translate">translate</dfn> given: 
    <ul>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">string</a> <var>input</var>,</p>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://tc39.es/ecma402/#sec-language-tags" id="ref-for-sec-language-tags①">Unicode canonicalized locale identifier</a> <var>sourceLanguage</var>,</p>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://tc39.es/ecma402/#sec-language-tags" id="ref-for-sec-language-tags②">Unicode canonicalized locale identifier</a> <var>targetLanguage</var>,</p>
     <li data-md>
      <p>a number <var>inputQuota</var>,</p>
     <li data-md>
      <p>an algorithm <var>chunkProduced</var> that takes a string and returns nothing,</p>
     <li data-md>
      <p>an algorithm <var>done</var> that takes no arguments and returns nothing,</p>
     <li data-md>
      <p>an algorithm <var>error</var> that takes <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information">error information</a> and returns nothing, and</p>
     <li data-md>
      <p>an algorithm <var>stopProducing</var> that takes no arguments and returns a boolean,</p>
    </ul>
    <p>perform the following steps:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel④">in parallel</a>.</p>
     <li data-md>
      <p>Let <var>requested</var> be the result of <a data-link-type="dfn" href="#measure-translator-input-usage" id="ref-for-measure-translator-input-usage①">measuring translator input usage</a> given <var>input</var>, <var>sourceLanguage</var>, <var>targetLanguage</var>, and <var>stopProducing</var>.</p>
     <li data-md>
      <p>If <var>requested</var> is null, then return.</p>
     <li data-md>
      <p>If <var>requested</var> is an <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information①">error information</a>, then:</p>
      <ol>
       <li data-md>
        <p>Perform <var>error</var> given <var>requested</var>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑥">Assert</a>: <var>requested</var> is a number.</p>
     <li data-md>
      <p>If <var>requested</var> is greater than <var>inputQuota</var>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>errorInfo</var> be a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information" id="ref-for-quota-exceeded-error-information">quota exceeded error information</a> with a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-requested" id="ref-for-quota-exceeded-error-information-requested">requested</a> of <var>requested</var> and a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-quota" id="ref-for-quota-exceeded-error-information-quota">quota</a> of <var>inputQuota</var>.</p>
       <li data-md>
        <p>Perform <var>error</var> given <var>errorInfo</var>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
      <p class="note" role="note">In reality, we expect that implementations will check the input usage against the quota as part of the same call into the model as the translation itself. The steps are only separated in the specification for ease of understanding. </p>
     <li data-md>
      <p>In an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①">implementation-defined</a> manner, subject to the following guidelines, begin the processs of translating <var>input</var> from <var>sourceLanguage</var> into <var>targetLanguage</var>.</p>
      <p>If <var>input</var> is the empty string, or otherwise consists of no translatable content (e.g., only contains whitespace, or control characters), then the resulting translation should be <var>input</var>. In such cases, <var>sourceLanguage</var> and <var>targetLanguage</var> should be ignored.</p>
      <p>If (<var>sourceLanguage</var>, <var>targetLanguage</var>) <a data-link-type="dfn" href="#language-arc-can-be-fulfilled-by-the-identity-translation" id="ref-for-language-arc-can-be-fulfilled-by-the-identity-translation②">can be fulfilled by the identity translation</a>, then the resulting translation should be <var>input</var>.</p>
     <li data-md>
      <p>While true:</p>
      <ol>
       <li data-md>
        <p>Wait for the next chunk of translated text to be produced, for the translation process to finish, or for the result of calling <var>stopProducing</var> to become true.</p>
       <li data-md>
        <p>If such a chunk is successfully produced:</p>
        <ol>
         <li data-md>
          <p>Let it be represented as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string③">string</a> <var>chunk</var>.</p>
         <li data-md>
          <p>Perform <var>chunkProduced</var> given <var>chunk</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if the translation process has finished:</p>
        <ol>
         <li data-md>
          <p>Perform <var>done</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break">Break</a>.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>stopProducing</var> returns true, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break①">break</a>.</p>
       <li data-md>
        <p>Otherwise, if an error occurred during translation:</p>
        <ol>
         <li data-md>
          <p>Let the error be represented as a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information①">DOMException error information</a> <var>errorInfo</var> according to the guidance in <a href="#translator-errors">§ 3.4.3 Errors</a>.</p>
         <li data-md>
          <p>Perform <var>error</var> given <var>errorInfo</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break②">Break</a>.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="3.4.2" id="translator-usage"><span class="secno">3.4.2. </span><span class="content">Usage</span><a class="self-link" href="#translator-usage"></a></h4>
   <div class="algorithm" data-algorithm="measure translator input usage">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="measure-translator-input-usage">measure translator input usage</dfn>, given: 
    <ul>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string④">string</a> <var>input</var>,</p>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://tc39.es/ecma402/#sec-language-tags" id="ref-for-sec-language-tags③">Unicode canonicalized locale identifier</a> <var>sourceLanguage</var>,</p>
     <li data-md>
      <p>a <a data-link-type="dfn" href="https://tc39.es/ecma402/#sec-language-tags" id="ref-for-sec-language-tags④">Unicode canonicalized locale identifier</a> <var>targetLanguage</var>, and</p>
     <li data-md>
      <p>an algorithm <var>stopMeasuring</var> that takes no arguments and returns a boolean,</p>
    </ul>
    <p>perform the following steps:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑦">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑤">in parallel</a>.</p>
     <li data-md>
      <p>Let <var>inputToModel</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined②">implementation-defined</a> string that would be sent to the underlying model in order to <a data-link-type="dfn" href="#translate" id="ref-for-translate④">translate</a> <var>input</var> from <var>sourceLanguage</var> to <var>targetLanguage</var>.</p>
      <p class="note" id="note-input-to-language-detector-model" role="note"><a class="self-link" href="#note-input-to-language-detector-model"></a>This might be just <var>input</var> itself, if <var>sourceLanguage</var> and <var>targetLanguage</var> were loaded into the model during initialization. Or it might consist of more, e.g. appropriate quota usage for encoding the languages in question, or some sort of wrapper prompt to a language model. </p>
      <p>If during this process <var>stopMeasuring</var> starts returning true, then return null.</p>
      <p>If an error occurs during this process, then return an appropriate <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information②">DOMException error information</a> according to the guidance in <a href="#translator-errors">§ 3.4.3 Errors</a>.</p>
     <li data-md>
      <p>Return the amount of input usage needed to represent <var>inputToModel</var> when given to the underlying model. The exact calculation procedure is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined③">implementation-defined</a>, subject to the following constraints.</p>
      <p>The returned input usage must be nonnegative and finite. It must be 0, if there are no usage quotas for the translation process (i.e., if the <a data-link-type="dfn" href="#translator-input-quota" id="ref-for-translator-input-quota④">input quota</a> is +∞). Otherwise, it must be positive and should be roughly proportional to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a> of <var>inputToModel</var>.</p>
      <p class="note" id="note-translator-input-usage" role="note"><a class="self-link" href="#note-translator-input-usage"></a>This might be the number of tokens needed to represent <var>input</var> in a <a href="https://arxiv.org/abs/2404.08335">language model tokenization scheme</a>, or it might be <var>input</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①">length</a>. It could also be some variation of these which also counts the usage of any prefixes or suffixes necessary to give to the model. </p>
      <p>If during this process <var>stopMeasuring</var> starts returning true, then instead return null.</p>
      <p>If an error occurs during this process, then instead return an appropriate <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information③">DOMException error information</a> according to the guidance in <a href="#translator-errors">§ 3.4.3 Errors</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="3.4.3" id="translator-errors"><span class="secno">3.4.3. </span><span class="content">Errors</span><a class="self-link" href="#translator-errors"></a></h4>
   <p>When translation fails, the following possible reasons may be surfaced to the web developer. This table lists the possible <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#domexception-name" id="ref-for-domexception-name">names</a> and the cases in which an implementation should use them:</p>
   <table class="data">
    <thead>
     <tr>
      <th><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#domexception-name" id="ref-for-domexception-name①">name</a> 
      <th>Scenarios 
    <tbody>
     <tr>
      <td>"<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code>" 
      <td>
       <p>Translation is disabled by user choice or user agent policy. </p>
     <tr>
      <td>"<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notreadableerror" id="ref-for-notreadableerror">NotReadableError</a></code>" 
      <td>
       <p>The translation output was filtered by the user agent, e.g., because it was detected to be harmful, inaccurate, or nonsensical. </p>
     <tr>
      <td>"<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#unknownerror" id="ref-for-unknownerror">UnknownError</a></code>" 
      <td>
       <p>All other scenarios, or if the user agent would prefer not to disclose the failure reason. </p>
   </table>
   <p class="note" role="note">This table does not give the complete list of exceptions that can be surfaced by the translator API. It only contains those which can come from certain <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined④">implementation-defined</a> steps. </p>
   <h3 class="heading settled" data-level="3.5" id="translator-permissions-policy"><span class="secno">3.5. </span><span class="content">Permissions policy integration</span><a class="self-link" href="#translator-permissions-policy"></a></h3>
   <p>Access to the translator API is gated behind the <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled feature</a> "<dfn class="dfn-paneled idl-code" data-dfn-type="permission" data-export id="permissiondef-translator"><code>translator</code></dfn>", which has a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist">default allowlist</a> of <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#default-allowlist-self" id="ref-for-default-allowlist-self">'self'</a></code>.</p>
   <h2 class="heading settled" data-level="4" id="language-detector-api"><span class="secno">4. </span><span class="content">The language detector API</span><a class="self-link" href="#language-detector-api"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="languagedetector"><code><c- g>LanguageDetector</c-></code></dfn> {
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#languagedetector" id="ref-for-languagedetector"><c- n>LanguageDetector</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-create" id="ref-for-dom-languagedetector-create"><c- g>create</c-></a>(
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectorcreateoptions" id="ref-for-dictdef-languagedetectorcreateoptions"><c- n>LanguageDetectorCreateOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/create(options), LanguageDetector/create()" data-dfn-type="argument" data-export id="dom-languagedetector-create-options-options"><code><c- g>options</c-></code></dfn> = {}
  );
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability④"><c- n>Availability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-availability" id="ref-for-dom-languagedetector-availability"><c- g>availability</c-></a>(
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions"><c- n>LanguageDetectorCreateCoreOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/availability(options), LanguageDetector/availability()" data-dfn-type="argument" data-export id="dom-languagedetector-availability-options-options"><code><c- g>options</c-></code></dfn> = {}
  );

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-languagedetectionresult" id="ref-for-dictdef-languagedetectionresult"><c- n>LanguageDetectionResult</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-detect" id="ref-for-dom-languagedetector-detect"><c- g>detect</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/detect(input, options), LanguageDetector/detect(input)" data-dfn-type="argument" data-export id="dom-languagedetector-detect-input-options-input"><code><c- g>input</c-></code></dfn>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectordetectoptions" id="ref-for-dictdef-languagedetectordetectoptions"><c- n>LanguageDetectorDetectOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/detect(input, options), LanguageDetector/detect(input)" data-dfn-type="argument" data-export id="dom-languagedetector-detect-input-options-options"><code><c- g>options</c-></code></dfn> = {}
  );

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a>>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<DOMString>?" href="#dom-languagedetector-expectedinputlanguages" id="ref-for-dom-languagedetector-expectedinputlanguages"><c- g>expectedInputLanguages</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-measureinputusage" id="ref-for-dom-languagedetector-measureinputusage"><c- g>measureInputUsage</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/measureInputUsage(input, options), LanguageDetector/measureInputUsage(input)" data-dfn-type="argument" data-export id="dom-languagedetector-measureinputusage-input-options-input"><code><c- g>input</c-></code></dfn>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectordetectoptions" id="ref-for-dictdef-languagedetectordetectoptions①"><c- n>LanguageDetectorDetectOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector/measureInputUsage(input, options), LanguageDetector/measureInputUsage(input)" data-dfn-type="argument" data-export id="dom-languagedetector-measureinputusage-input-options-options"><code><c- g>options</c-></code></dfn> = {}
  );
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①"><c- b>unrestricted</c-> <c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unrestricted double" href="#dom-languagedetector-inputquota" id="ref-for-dom-languagedetector-inputquota"><c- g>inputQuota</c-></a>;
};
<a data-link-type="idl-name" href="#languagedetector" id="ref-for-languagedetector①"><c- n>LanguageDetector</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel" id="ref-for-destroyablemodel①"><c- n>DestroyableModel</c-></a>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-languagedetectorcreatecoreoptions"><code><c- g>LanguageDetectorCreateCoreOptions</c-></code></dfn> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectorCreateCoreOptions" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-languagedetectorcreatecoreoptions-expectedinputlanguages"><code><c- g>expectedInputLanguages</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-languagedetectorcreateoptions"><code><c- g>LanguageDetectorCreateOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions①"><c- n>LanguageDetectorCreateCoreOptions</c-></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectorCreateOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-languagedetectorcreateoptions-signal"><code><c- g>signal</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback" id="ref-for-callbackdef-createmonitorcallback①"><c- n>CreateMonitorCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectorCreateOptions" data-dfn-type="dict-member" data-export data-type="CreateMonitorCallback" id="dom-languagedetectorcreateoptions-monitor"><code><c- g>monitor</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-languagedetectordetectoptions"><code><c- g>LanguageDetectorDetectOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectorDetectOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-languagedetectordetectoptions-signal"><code><c- g>signal</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-languagedetectionresult"><code><c- g>LanguageDetectionResult</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectionResult" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-languagedetectionresult-detectedlanguage"><code><c- g>detectedLanguage</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetectionResult" data-dfn-type="dict-member" data-export data-type="double" id="dom-languagedetectionresult-confidence"><code><c- g>confidence</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="4.1" id="language-detector-creation"><span class="secno">4.1. </span><span class="content">Creation</span><a class="self-link" href="#language-detector-creation"></a></h3>
   <div class="algorithm" data-algorithm="create(options)" data-algorithm-for="LanguageDetector">
     The static <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="method" data-export data-lt="create(options)|create()" id="dom-languagedetector-create"><code>create(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#create-an-ai-model-object" id="ref-for-create-an-ai-model-object①">creating an AI model object</a> given <var>options</var>, "<code class="idl"><a data-link-type="idl" href="#permissiondef-language-detector" id="ref-for-permissiondef-language-detector">language-detector</a></code>", <a data-link-type="dfn" href="#validate-and-canonicalize-language-detector-options" id="ref-for-validate-and-canonicalize-language-detector-options">validate and canonicalize language detector options</a>, <a data-link-type="dfn" href="#compute-language-detector-options-availability" id="ref-for-compute-language-detector-options-availability">compute language detector options availability</a>, <a data-link-type="dfn" href="#download-the-language-detector-model" id="ref-for-download-the-language-detector-model">download the language detector model</a>, <a data-link-type="dfn" href="#initialize-the-language-detector-model" id="ref-for-initialize-the-language-detector-model">initialize the language detector model</a>, and <a data-link-type="dfn" href="#create-the-language-detector-object" id="ref-for-create-the-language-detector-object">create the language detector object</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="validate and canonicalize language detector options">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-and-canonicalize-language-detector-options">validate and canonicalize language detector options</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions②">LanguageDetectorCreateCoreOptions</a></code> <var>options</var>, perform the following steps. They mutate <var>options</var> in place to canonicalize language tags, and throw an exception if any are invalid. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags" id="ref-for-validate-and-canonicalize-language-tags②">Validate and canonicalize language tags</a> given <var>options</var> and "<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages">expectedInputLanguages</a></code>".</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="download the language detector model">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="download-the-language-detector-model">download the language detector model</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions③">LanguageDetectorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑧">Assert</a>: these steps are running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑥">in parallel</a>.</p>
     <li data-md>
      <p>Initiate the download process for everything the user agent needs to detect the languages of input text, including all the languages in <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages①">expectedInputLanguages</a></code>"].</p>
      <p>This could include both a base language detection model, and specific fine-tunings or other material to help with the languages identified in <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages②">expectedInputLanguages</a></code>"].</p>
     <li data-md>
      <p>If the download process cannot be started for any reason, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="initialize the language detector model">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initialize-the-language-detector-model">initialize the language detector model</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions④">LanguageDetectorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑨">Assert</a>: these steps are running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑦">in parallel</a>.</p>
     <li data-md>
      <p>Perform any necessary initialization operations for the AI model backing the user agent’s capabilities for detecting the languages of input text.</p>
      <p>This could include loading the model into memory, or loading any fine-tunings necessary to support the languages identified in <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages③">expectedInputLanguages</a></code>"].</p>
     <li data-md>
      <p>If initialization failed for any reason, then return a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information④">DOMException error information</a> whose <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-name" id="ref-for-domexception-error-information-name①">name</a> is "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror①">OperationError</a></code>" and whose <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-details" id="ref-for-domexception-error-information-details①">details</a> contain appropriate detail.</p>
     <li data-md>
      <p>Return null.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="create the language detector object">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-the-language-detector-object">create the language detector object</dfn>, given a <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm" id="ref-for-realm①">realm</a> <var>realm</var> and a <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions⑤">LanguageDetectorCreateCoreOptions</a></code> <var>options</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⓪">Assert</a>: these steps are running on <var>realm</var>’s <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#surrounding-agent" id="ref-for-surrounding-agent①">surrounding agent</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop" id="ref-for-concept-agent-event-loop①">event loop</a>.</p>
     <li data-md>
      <p>Let <var>inputQuota</var> be the amount of input quota that is available to the user agent for future <a data-link-type="dfn" href="#detect-languages" id="ref-for-detect-languages">language detection</a> operations. (This value is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined⑤">implementation-defined</a>, and may be +∞ if there are no specific limits beyond, e.g., the user’s memory, or the limits of JavaScript strings.)</p>
     <li data-md>
      <p>Return a new <code class="idl"><a data-link-type="idl" href="#languagedetector" id="ref-for-languagedetector②">LanguageDetector</a></code> object, created in <var>realm</var>, with</p>
      <dl class="props">
       <dt data-md><a data-link-type="dfn" href="#languagedetector-expected-input-languages" id="ref-for-languagedetector-expected-input-languages">expected input languages</a>
       <dd data-md>
        <p>the result of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-create-frozen-array" id="ref-for-dfn-create-frozen-array">creating a frozen array</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages④">expectedInputLanguages</a></code>"] if it <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">is not empty</a>; otherwise null</p>
       <dt data-md><a data-link-type="dfn" href="#languagedetector-input-quota" id="ref-for-languagedetector-input-quota">input quota</a>
       <dd data-md>
        <p><var>inputQuota</var></p>
      </dl>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.2" id="language-detector-availability"><span class="secno">4.2. </span><span class="content">Availability</span><a class="self-link" href="#language-detector-availability"></a></h3>
   <div class="algorithm" data-algorithm="availability(options)" data-algorithm-for="LanguageDetector">
     The static <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="method" data-export data-lt="availability(options)|availability()" id="dom-languagedetector-availability"><code>availability(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#compute-ai-model-availability" id="ref-for-compute-ai-model-availability①">computing AI model availability</a> given <var>options</var>, "<code class="idl"><a data-link-type="idl" href="#permissiondef-language-detector" id="ref-for-permissiondef-language-detector①">language-detector</a></code>", <a data-link-type="dfn" href="#validate-and-canonicalize-language-detector-options" id="ref-for-validate-and-canonicalize-language-detector-options①">validate and canonicalize language detector options</a>, and <a data-link-type="dfn" href="#compute-language-detector-options-availability" id="ref-for-compute-language-detector-options-availability①">compute language detector options availability</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="compute language detector options availability">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-language-detector-options-availability">compute language detector options availability</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectorcreatecoreoptions" id="ref-for-dictdef-languagedetectorcreatecoreoptions⑥">LanguageDetectorCreateCoreOptions</a></code> <var>options</var>, perform the following steps. They return either an <code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability" id="ref-for-enumdef-availability⑤">Availability</a></code> value or null, and they mutate <var>options</var> in place to update language tags to their best-fit matches. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①①">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑧">in parallel</a>.</p>
     <li data-md>
      <p>If there is some error attempting to determine what languages the user agent supports detecting, which the user agent believes to be transient (such that re-querying could stop producing such an error), then return null.</p>
     <li data-md>
      <p>Let <var>partition</var> be the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#get-the-language-availabilities-partition" id="ref-for-get-the-language-availabilities-partition">getting the language availabilities partition</a> given the purpose of detecting text written in that language.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#compute-language-availability" id="ref-for-compute-language-availability">computing language availability</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages" id="ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages⑤">expectedInputLanguages</a></code>"] and <var>partition</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.3" id="the-LanguageDetector-class"><span class="secno">4.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#languagedetector" id="ref-for-languagedetector③">LanguageDetector</a></code> class</span><a class="self-link" href="#the-LanguageDetector-class"></a></h3>
   <p>Every <code class="idl"><a data-link-type="idl" href="#languagedetector" id="ref-for-languagedetector④">LanguageDetector</a></code> has an <dfn class="dfn-paneled" data-dfn-for="LanguageDetector" data-dfn-type="dfn" data-noexport id="languagedetector-expected-input-languages">expected input languages</dfn>, a <code><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array①">FrozenArray</a></code>&lt;<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①③">DOMString</a></code>></code> or null, set during creation.</p>
   <p>Every <code class="idl"><a data-link-type="idl" href="#languagedetector" id="ref-for-languagedetector⑤">LanguageDetector</a></code> has an <dfn class="dfn-paneled" data-dfn-for="LanguageDetector" data-dfn-type="dfn" data-noexport id="languagedetector-input-quota">input quota</dfn>, a number, set during creation.</p>
   <hr>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="attribute" data-export id="dom-languagedetector-expectedinputlanguages"><code>expectedInputLanguages</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>’s <a data-link-type="dfn" href="#languagedetector-expected-input-languages" id="ref-for-languagedetector-expected-input-languages①">expected input languages</a>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="attribute" data-export id="dom-languagedetector-inputquota"><code>inputQuota</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>’s <a data-link-type="dfn" href="#languagedetector-input-quota" id="ref-for-languagedetector-input-quota①">input quota</a>.</p>
   <hr>
   <div class="algorithm" data-algorithm="detect(input, options)" data-algorithm-for="LanguageDetector">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="method" data-export data-lt="detect(input, options)|detect(input)" id="dom-languagedetector-detect"><code>detect(<var>input</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>global</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a>.</p>
    </ol>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①②">Assert</a>: <var>global</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> object.</p>
     <li data-md>
      <p>If <var>global</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated Document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> an "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>.</p>
     <li data-md>
      <p>Let <var>signals</var> be « <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>’s <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel-destruction-abort-controller" id="ref-for-destroyablemodel-destruction-abort-controller">destruction abort controller</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal" id="ref-for-abortcontroller-signal">signal</a> ».</p>
     <li data-md>
      <p>If <var>options</var>["<code>signal</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">append</a> it to <var>signals</var>.</p>
     <li data-md>
      <p>Let <var>compositeSignal</var> be the result of <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" id="ref-for-create-a-dependent-abort-signal">creating a dependent abort signal</a> given <var>signals</var> using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal④">AbortSignal</a></code> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a>.</p>
     <li data-md>
      <p>If <var>compositeSignal</var> is <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted" id="ref-for-abortsignal-aborted">aborted</a>, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> <var>compositeSignal</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason">abort reason</a>.</p>
     <li data-md>
      <p>Let <var>abortedDuringOperation</var> be false.</p>
      <p class="note" role="note">This variable will be written to from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a>, but read from <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑨">in parallel</a>. </p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add">Add the following abort steps</a> to <var>compositeSignal</var>:</p>
      <ol>
       <li data-md>
        <p>Set <var>abortedDuringOperation</var> to true.</p>
      </ol>
     <li data-md>
      <p>Let <var>inputQuota</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>’s <a data-link-type="dfn" href="#languagedetector-input-quota" id="ref-for-languagedetector-input-quota②">input quota</a>.</p>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a> created in <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①⓪">In parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>stopProducing</var> be the following steps:</p>
        <ol>
         <li data-md>
          <p>Return <var>abortedDuringOperation</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="#detect-languages" id="ref-for-detect-languages①">detecting languages</a> given <var>input</var>, <var>inputQuota</var>, and <var>stopProducing</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">Queue a global task</a> on the <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#ai-task-source" id="ref-for-ai-task-source">AI task source</a> given <var>global</var> to perform the following steps:</p>
        <ol>
         <li data-md>
          <p>If <var>abortedDuringOperation</var> is true, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>promise</var> with <var>compositeSignal</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-abort-reason" id="ref-for-abortsignal-abort-reason①">abort reason</a>.</p>
         <li data-md>
          <p>Otherwise, if <var>result</var> is an <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information②">error information</a>, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>promise</var> with the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#convert-error-information-into-an-exception-object" id="ref-for-convert-error-information-into-an-exception-object">converting error information into an exception object</a> given <var>result</var>.</p>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①③">Assert</a>: <var>result</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectionresult" id="ref-for-dictdef-languagedetectionresult①">LanguageDetectionResult</a></code> dictionaries. (It is not null, since in that case <var>abortedDuringOperation</var> would have been true.)</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">Resolve</a> <var>promise</var> with <var>result</var>.</p>
          </ol>
        </ol>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="measureInputUsage(input, options)" data-algorithm-for="LanguageDetector">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="LanguageDetector" data-dfn-type="method" data-export data-lt="measureInputUsage(input, options)|measureInputUsage(input)" id="dom-languagedetector-measureinputusage"><code>measureInputUsage(<var>input</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>measureUsage</var> be an algorithm step which takes argument <var>stopMeasuring</var>, and returns the result of <a data-link-type="dfn" href="#measure-language-detector-input-usage" id="ref-for-measure-language-detector-input-usage">measuring language detector input usage</a> given <var>input</var> and <var>stopMeasuring</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#measure-ai-model-input-usage" id="ref-for-measure-ai-model-input-usage①">measuring AI model input usage</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>, <var>options</var>, and <var>measureUsage</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.4" id="language-detector-language-detection"><span class="secno">4.4. </span><span class="content">Language detection</span><a class="self-link" href="#language-detector-language-detection"></a></h3>
   <h4 class="heading settled" data-level="4.4.1" id="language-detector-algorithm"><span class="secno">4.4.1. </span><span class="content">The algorithm</span><a class="self-link" href="#language-detector-algorithm"></a></h4>
   <div class="algorithm" data-algorithm="detect languages">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="detect-languages">detect languages</dfn> given a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑤">string</a> <var>input</var>, a number <var>inputQuota</var>, and an algorithm <var>stopProducing</var> that takes no arguments and returns a boolean, perform the following steps. They will return either null, an <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information③">error information</a>, or a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <code class="idl"><a data-link-type="idl" href="#dictdef-languagedetectionresult" id="ref-for-dictdef-languagedetectionresult②">LanguageDetectionResult</a></code> dictionaries. 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①④">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①①">in parallel</a>.</p>
     <li data-md>
      <p>Let <var>requested</var> be the result of <a data-link-type="dfn" href="#measure-language-detector-input-usage" id="ref-for-measure-language-detector-input-usage①">measuring language detector input usage</a> given <var>input</var> and <var>stopProducing</var>.</p>
     <li data-md>
      <p>If <var>requested</var> is null or an <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information④">error information</a>, then return <var>requested</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑤">Assert</a>: <var>requested</var> is a number.</p>
     <li data-md>
      <p>If <var>requested</var> is greater than <var>inputQuota</var>, then return a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information" id="ref-for-quota-exceeded-error-information①">quota exceeded error information</a> with a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-requested" id="ref-for-quota-exceeded-error-information-requested①">requested</a> of <var>requested</var> and a <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-quota" id="ref-for-quota-exceeded-error-information-quota①">quota</a> of <var>inputQuota</var>.</p>
      <p class="note" role="note">In reality, we expect that implementations will check the input usage against the quota as part of the same call into the model as the language detection itself. The steps are only separated in the specification for ease of understanding. </p>
     <li data-md>
      <p>Let <var>partition</var> be the result of <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#get-the-language-availabilities-partition" id="ref-for-get-the-language-availabilities-partition①">getting the language availabilities partition</a> given the purpose of detecting text written in that language.</p>
     <li data-md>
      <p>Let <var>currentlyAvailableLanguages</var> be <var>partition</var>["<code class="idl"><a data-link-type="idl" href="https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available" id="ref-for-dom-availability-available④">available</a></code>"].</p>
     <li data-md>
      <p>In an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined⑥">implementation-defined</a> manner, subject to the following guidelines, let <var>rawResult</var> and <var>unknown</var> be the result of detecting the languages of <var>input</var>.</p>
      <p><var>rawResult</var> must be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a> which has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key③">key</a> for each language in <var>currentlyAvailableLanguages</var>. The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value③">value</a> for each such key must be a number between 0 and 1. This value must represent the implementation’s confidence that <var>input</var> is written in that language.</p>
      <p><var>unknown</var> must be a number between 0 and 1 that represents the implementation’s confidence that <var>input</var> is not written in any of the languages in <var>currentlyAvailableLanguages</var>.</p>
      <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values">values</a> of <var>rawResult</var>, plus <var>unknown</var>, must sum to 1. Each such value, or <var>unknown</var>, may be 0.</p>
      <p>If the implementation believes <var>input</var> to be written in multiple languages, then it should attempt to apportion the values of <var>rawResult</var> and <var>unknown</var> such that they are proportionate to the amount of <var>input</var> written in each detected language. The exact scheme for apportioning <var>input</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined⑦">implementation-defined</a>.</p>
      <div class="example" id="example-multilingual-input">
       <a class="self-link" href="#example-multilingual-input"></a> 
       <p>If <var>input</var> is "<code>tacosを食べる</code>", the implementation might split this into "<code>tacos</code>" and "<code>を食べる</code>", and then detect the languages of each separately. The first part might be detected as English with confidence 0.5 and Spanish with confidence 0.5, and the second part as Japanese with confidence 1. The resulting <var>rawResult</var> then might be «[ "<code>en</code>" → 0.25, "<code>es</code>" → 0.25, "<code>ja</code>" → 0.5 ]» (with <var>unknown</var> set to 0). </p>
       <p>The decision to split this into two parts, instead of e.g. the three parts "<code>tacos</code>", "<code>を</code>", and "<code>食べる</code>", was an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined⑧">implementation-defined</a> choice. Similarly, the decision to treat each part as contributing to "half" of the result, instead of e.g. weighting by number of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code points</a>, was <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined⑨">implementation-defined</a>. </p>
       <p>(Realistically, we expect that implementations will split on larger chunks than this, as generally more than 4-5 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point①">code points</a> are necessary for most language detection models.) </p>
      </div>
      <p>If <var>stopProducing</var> returns true at any point during this process, then return null.</p>
      <p>If an error occurred during language detection, then return an <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#error-information" id="ref-for-error-information⑤">error information</a> according to the guidance in <a href="#language-detector-errors">§ 4.4.3 Errors</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-sort-in-descending-order" id="ref-for-map-sort-in-descending-order">Sort in descending order</a> <var>rawResult</var> with a less than algorithm which given <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry③">entries</a> <var>a</var> and <var>b</var>, returns true if <var>a</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value④">value</a> is less than <var>b</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value⑤">value</a>.</p>
     <li data-md>
      <p>Let <var>results</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a>.</p>
     <li data-md>
      <p>Let <var>cumulativeConfidence</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">For each</a> <var>key</var> → <var>value</var> of <var>rawResult</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>value</var> is 0, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break③">break</a>.</p>
       <li data-md>
        <p>If <var>value</var> is less than <var>unknown</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break④">break</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> «[ "<code class="idl"><a data-link-type="idl" href="#dom-languagedetectionresult-detectedlanguage" id="ref-for-dom-languagedetectionresult-detectedlanguage">detectedLanguage</a></code>" → <var>key</var>, "<code class="idl"><a data-link-type="idl" href="#dom-languagedetectionresult-confidence" id="ref-for-dom-languagedetectionresult-confidence">confidence</a></code>" → <var>value</var> ]» to <var>results</var>.</p>
       <li data-md>
        <p>Set <var>cumulativeConfidence</var> to <var>cumulativeConfidence</var> + <var>value</var>.</p>
       <li data-md>
        <p>If <var>cumulativeConfidence</var> is greater than or equal to 0.99, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break" id="ref-for-iteration-break⑤">break</a>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑥">Assert</a>: 1 − <var>cumulativeConfidence</var> is greater than or equal to <var>unknown</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> «[ "<code class="idl"><a data-link-type="idl" href="#dom-languagedetectionresult-detectedlanguage" id="ref-for-dom-languagedetectionresult-detectedlanguage①">detectedLanguage</a></code>" → "<code>und</code>", "<code class="idl"><a data-link-type="idl" href="#dom-languagedetectionresult-confidence" id="ref-for-dom-languagedetectionresult-confidence①">confidence</a></code>" → 1 − <var>cumulativeConfidence</var> ]» to <var>results</var>.</p>
     <li data-md>
      <p>Return <var>results</var>.</p>
    </ol>
    <p class="note" id="note-language-detection-post-processing" role="note"><a class="self-link" href="#note-language-detection-post-processing"></a>The post-processing of <var>rawResult</var> and <var>unknown</var> essentially consolidates all languages below a certain threshold into the "<code>und</code>" language. Languages which are less than 1% likely, or contribute to less than 1% of the text, are considered more likely to be noise than to be worth detecting. Similarly, if the implementation is less sure about a language than it is about the text not being in any of the languages it knows, that language is probably not worth returning to the web developer. </p>
   </div>
   <h4 class="heading settled" data-level="4.4.2" id="language-detector-usage"><span class="secno">4.4.2. </span><span class="content">Usage</span><a class="self-link" href="#language-detector-usage"></a></h4>
   <div class="algorithm" data-algorithm="measure language detector input usage">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="measure-language-detector-input-usage">measure language detector input usage</dfn>, given a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑥">string</a> <var>input</var> and an algorithm <var>stopMeasuring</var> that takes no arguments and returns a boolean, perform the following steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑦">Assert</a>: this algorithm is running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①②">in parallel</a>.</p>
     <li data-md>
      <p>Let <var>inputToModel</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①⓪">implementation-defined</a> string that would be sent to the underlying model in order to <a data-link-type="dfn" href="#detect-languages" id="ref-for-detect-languages②">detect languages</a> given <var>input</var>.</p>
      <p class="note" id="note-input-to-translator-model" role="note"><a class="self-link" href="#note-input-to-translator-model"></a>This might be just <var>input</var> itself, or it might include some sort of wrapper prompt to a language model. </p>
      <p>If during this process <var>stopMeasuring</var> starts returning true, then return null.</p>
      <p>If an error occurs during this process, then return an appropriate <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information⑤">DOMException error information</a> according to the guidance in <a href="#language-detector-errors">§ 4.4.3 Errors</a>.</p>
     <li data-md>
      <p>Return the amount of input usage needed to represent <var>inputToModel</var> when given to the underlying model. The exact calculation procedure is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①①">implementation-defined</a>, subject to the following constraints.</p>
      <p>The returned input usage must be nonnegative and finite. It must be 0, if there are no usage quotas for the translation process (i.e., if the <a data-link-type="dfn" href="#languagedetector-input-quota" id="ref-for-languagedetector-input-quota③">input quota</a> is +∞). Otherwise, it must be positive and should be roughly proportional to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length②">length</a> of <var>inputToModel</var>.</p>
      <p class="note" id="note-language-detector-input-usage" role="note"><a class="self-link" href="#note-language-detector-input-usage"></a>This might be the number of tokens needed to represent <var>input</var> in a <a href="https://arxiv.org/abs/2404.08335">language model tokenization scheme</a>, or it might be <var>input</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length③">length</a>. It could also be some variation of these which also counts the usage of any prefixes or suffixes necessary to give to the model. </p>
      <p>If during this process <var>stopMeasuring</var> starts returning true, then instead return null.</p>
      <p>If an error occurs during this process, then instead return an appropriate <a data-link-type="dfn" href="https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information" id="ref-for-domexception-error-information⑥">DOMException error information</a> according to the guidance in <a href="#language-detector-errors">§ 4.4.3 Errors</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="4.4.3" id="language-detector-errors"><span class="secno">4.4.3. </span><span class="content">Errors</span><a class="self-link" href="#language-detector-errors"></a></h4>
   <p>When language detection fails, the following possible reasons may be surfaced to the web developer. This table lists the possible <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#domexception-name" id="ref-for-domexception-name②">names</a> and the cases in which an implementation should use them:</p>
   <table class="data">
    <thead>
     <tr>
      <th><code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#domexception-name" id="ref-for-domexception-name③">name</a> 
      <th>Scenarios 
    <tbody>
     <tr>
      <td>"<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror①">NotAllowedError</a></code>" 
      <td>
       <p>Language detection is disabled by user choice or user agent policy. </p>
     <tr>
      <td>"<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#unknownerror" id="ref-for-unknownerror①">UnknownError</a></code>" 
      <td>
       <p>All other scenarios, or if the user agent would prefer not to disclose the failure reason. </p>
   </table>
   <p class="note" role="note">This table does not give the complete list of exceptions that can be surfaced by the language detector API. It only contains those which can come from certain <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①②">implementation-defined</a> steps. </p>
   <h3 class="heading settled" data-level="4.5" id="language-detector-permissions-policy"><span class="secno">4.5. </span><span class="content">Permissions policy integration</span><a class="self-link" href="#language-detector-permissions-policy"></a></h3>
   <p>Access to the language detector API is gated behind the <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature①">policy-controlled feature</a> "<dfn class="dfn-paneled idl-code" data-dfn-type="permission" data-export id="permissiondef-language-detector"><code>language-detector</code></dfn>", which has a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist①">default allowlist</a> of <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#default-allowlist-self" id="ref-for-default-allowlist-self①">'self'</a></code>.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-languagedetector-availability">availability()</a><span>, in § 4.2</span>
   <li>
    availability(options)
    <ul>
     <li><a href="#dom-languagedetector-availability">method for LanguageDetector</a><span>, in § 4.2</span>
     <li><a href="#dom-translator-availability">method for Translator</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#language-arc-can-be-fulfilled-by-the-identity-translation">can be fulfilled by the identity translation</a><span>, in § 3.2</span>
   <li><a href="#compute-language-detector-options-availability">compute language detector options availability</a><span>, in § 4.2</span>
   <li><a href="#compute-translator-options-availability">compute translator options availability</a><span>, in § 3.2</span>
   <li><a href="#dom-languagedetectionresult-confidence">confidence</a><span>, in § 4</span>
   <li><a href="#dom-languagedetector-create">create()</a><span>, in § 4.1</span>
   <li>
    create(options)
    <ul>
     <li><a href="#dom-languagedetector-create">method for LanguageDetector</a><span>, in § 4.1</span>
     <li><a href="#dom-translator-create">method for Translator</a><span>, in § 3.1</span>
    </ul>
   <li><a href="#create-the-language-detector-object">create the language detector object</a><span>, in § 4.1</span>
   <li><a href="#create-the-translator-object">create the translator object</a><span>, in § 3.1</span>
   <li><a href="#dom-languagedetectionresult-detectedlanguage">detectedLanguage</a><span>, in § 4</span>
   <li><a href="#dom-languagedetector-detect">detect(input)</a><span>, in § 4.3</span>
   <li><a href="#dom-languagedetector-detect">detect(input, options)</a><span>, in § 4.3</span>
   <li><a href="#detect-languages">detect languages</a><span>, in § 4.4.1</span>
   <li><a href="#download-the-language-detector-model">download the language detector model</a><span>, in § 4.1</span>
   <li><a href="#download-the-translation-model">download the translation model</a><span>, in § 3.1</span>
   <li><a href="#languagedetector-expected-input-languages">expected input languages</a><span>, in § 4.3</span>
   <li>
    expectedInputLanguages
    <ul>
     <li><a href="#dom-languagedetector-expectedinputlanguages">attribute for LanguageDetector</a><span>, in § 4.3</span>
     <li><a href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages">dict-member for LanguageDetectorCreateCoreOptions</a><span>, in § 4</span>
    </ul>
   <li><a href="#initialize-the-language-detector-model">initialize the language detector model</a><span>, in § 4.1</span>
   <li><a href="#initialize-the-translation-model">initialize the translation model</a><span>, in § 3.1</span>
   <li>
    input quota
    <ul>
     <li><a href="#languagedetector-input-quota">dfn for LanguageDetector</a><span>, in § 4.3</span>
     <li><a href="#translator-input-quota">dfn for Translator</a><span>, in § 3.3</span>
    </ul>
   <li>
    inputQuota
    <ul>
     <li><a href="#dom-languagedetector-inputquota">attribute for LanguageDetector</a><span>, in § 4.3</span>
     <li><a href="#dom-translator-inputquota">attribute for Translator</a><span>, in § 3.3</span>
    </ul>
   <li><a href="#language-arc">language arc</a><span>, in § 3.2</span>
   <li><a href="#dictdef-languagedetectionresult">LanguageDetectionResult</a><span>, in § 4</span>
   <li><a href="#permissiondef-language-detector">language-detector</a><span>, in § 4.5</span>
   <li><a href="#languagedetector">LanguageDetector</a><span>, in § 4</span>
   <li><a href="#dictdef-languagedetectorcreatecoreoptions">LanguageDetectorCreateCoreOptions</a><span>, in § 4</span>
   <li><a href="#dictdef-languagedetectorcreateoptions">LanguageDetectorCreateOptions</a><span>, in § 4</span>
   <li><a href="#dictdef-languagedetectordetectoptions">LanguageDetectorDetectOptions</a><span>, in § 4</span>
   <li>
    measureInputUsage(input)
    <ul>
     <li><a href="#dom-languagedetector-measureinputusage">method for LanguageDetector</a><span>, in § 4.3</span>
     <li><a href="#dom-translator-measureinputusage">method for Translator</a><span>, in § 3.3</span>
    </ul>
   <li>
    measureInputUsage(input, options)
    <ul>
     <li><a href="#dom-languagedetector-measureinputusage">method for LanguageDetector</a><span>, in § 4.3</span>
     <li><a href="#dom-translator-measureinputusage">method for Translator</a><span>, in § 3.3</span>
    </ul>
   <li><a href="#measure-language-detector-input-usage">measure language detector input usage</a><span>, in § 4.4.2</span>
   <li><a href="#measure-translator-input-usage">measure translator input usage</a><span>, in § 3.4.2</span>
   <li>
    monitor
    <ul>
     <li><a href="#dom-languagedetectorcreateoptions-monitor">dict-member for LanguageDetectorCreateOptions</a><span>, in § 4</span>
     <li><a href="#dom-translatorcreateoptions-monitor">dict-member for TranslatorCreateOptions</a><span>, in § 3</span>
    </ul>
   <li><a href="#language-arc-overlaps">overlaps</a><span>, in § 3.2</span>
   <li>
    signal
    <ul>
     <li><a href="#dom-languagedetectorcreateoptions-signal">dict-member for LanguageDetectorCreateOptions</a><span>, in § 4</span>
     <li><a href="#dom-languagedetectordetectoptions-signal">dict-member for LanguageDetectorDetectOptions</a><span>, in § 4</span>
     <li><a href="#dom-translatorcreateoptions-signal">dict-member for TranslatorCreateOptions</a><span>, in § 3</span>
     <li><a href="#dom-translatortranslateoptions-signal">dict-member for TranslatorTranslateOptions</a><span>, in § 3</span>
    </ul>
   <li>
    source language
    <ul>
     <li><a href="#translator-source-language">dfn for Translator</a><span>, in § 3.3</span>
     <li><a href="#language-arc-source-language">dfn for language arc</a><span>, in § 3.2</span>
    </ul>
   <li>
    sourceLanguage
    <ul>
     <li><a href="#dom-translator-sourcelanguage">attribute for Translator</a><span>, in § 3.3</span>
     <li><a href="#dom-translatorcreatecoreoptions-sourcelanguage">dict-member for TranslatorCreateCoreOptions</a><span>, in § 3</span>
    </ul>
   <li>
    target language
    <ul>
     <li><a href="#translator-target-language">dfn for Translator</a><span>, in § 3.3</span>
     <li><a href="#language-arc-target-language">dfn for language arc</a><span>, in § 3.2</span>
    </ul>
   <li>
    targetLanguage
    <ul>
     <li><a href="#dom-translator-targetlanguage">attribute for Translator</a><span>, in § 3.3</span>
     <li><a href="#dom-translatorcreatecoreoptions-targetlanguage">dict-member for TranslatorCreateCoreOptions</a><span>, in § 3</span>
    </ul>
   <li><a href="#translate">translate</a><span>, in § 3.4.1</span>
   <li><a href="#dom-translator-translate">translate(input)</a><span>, in § 3.3</span>
   <li><a href="#dom-translator-translate">translate(input, options)</a><span>, in § 3.3</span>
   <li><a href="#dom-translator-translatestreaming">translateStreaming(input)</a><span>, in § 3.3</span>
   <li><a href="#dom-translator-translatestreaming">translateStreaming(input, options)</a><span>, in § 3.3</span>
   <li><a href="#translator">Translator</a><span>, in § 3</span>
   <li><a href="#permissiondef-translator">translator</a><span>, in § 3.5</span>
   <li><a href="#dictdef-translatorcreatecoreoptions">TranslatorCreateCoreOptions</a><span>, in § 3</span>
   <li><a href="#dictdef-translatorcreateoptions">TranslatorCreateOptions</a><span>, in § 3</span>
   <li><a href="#translator-language-arc-availabilities">translator language arc availabilities</a><span>, in § 3.2</span>
   <li><a href="#dictdef-translatortranslateoptions">TranslatorTranslateOptions</a><span>, in § 3</span>
   <li><a href="#validate-and-canonicalize-language-detector-options">validate and canonicalize language detector options</a><span>, in § 4.1</span>
   <li><a href="#validate-and-canonicalize-translator-options">validate and canonicalize translator options</a><span>, in § 3.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="cca3cdb2">AbortSignal</span>
     <li><span class="dfn-paneled" id="28e64574">abort reason</span>
     <li><span class="dfn-paneled" id="535dd335">aborted</span>
     <li><span class="dfn-paneled" id="87bc23a5">add</span>
     <li><span class="dfn-paneled" id="c9db6cec">create a dependent abort signal</span>
     <li><span class="dfn-paneled" id="0fe84b59">signal</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMA-402]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0e5dca01">LookupMatchingLocaleByBestFit</span>
     <li><span class="dfn-paneled" id="93e4c9ae">Unicode canonicalized locale identifier</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a5f015e3">realm</span>
     <li><span class="dfn-paneled" id="4ad913ae">surrounding agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="3349d69f">associated Document</span>
     <li><span class="dfn-paneled" id="c6d19e56">event loop</span>
     <li><span class="dfn-paneled" id="b78d6a64">event loop <small>(for agent)</small></span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="7b0d918d">break</span>
     <li><span class="dfn-paneled" id="915aff5e">code point</span>
     <li><span class="dfn-paneled" id="8958b003">entry</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="45209803">for each</span>
     <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
     <li><span class="dfn-paneled" id="6b815fdd">is empty</span>
     <li><span class="dfn-paneled" id="5afbefcd">item</span>
     <li><span class="dfn-paneled" id="d14a6f26">key</span>
     <li><span class="dfn-paneled" id="31db57e6">keys</span>
     <li><span class="dfn-paneled" id="0fa357c3">length</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="3fca5a9e">map</span>
     <li><span class="dfn-paneled" id="15e48c39">set</span>
     <li><span class="dfn-paneled" id="842d5baf">sort in descending order</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="0e8de730">tuple</span>
     <li><span class="dfn-paneled" id="802b0fdd">value</span>
     <li><span class="dfn-paneled" id="12d6b9a8">values</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="333b39ba">'self'</span>
     <li><span class="dfn-paneled" id="1570624a">default allowlist</span>
     <li><span class="dfn-paneled" id="cc890cc1">policy-controlled feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STREAMS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="59ed4e57">ReadableStream</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="dcf5fafa">FrozenArray</span>
     <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
     <li><span class="dfn-paneled" id="ba556545">NotAllowedError</span>
     <li><span class="dfn-paneled" id="0be3911e">NotReadableError</span>
     <li><span class="dfn-paneled" id="34443090">OperationError</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="81dd847b">UnknownError</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="c537c824">creating a frozen array</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="44959ae4">name</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="11e0b87f">unrestricted double</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WRITING-ASSISTANCE-APIS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="747aef8a">"available"</span>
     <li><span class="dfn-paneled" id="fe9b910d">"downloadable"</span>
     <li><span class="dfn-paneled" id="0d4d33cf">"downloading"</span>
     <li><span class="dfn-paneled" id="ded71193">"unavailable"</span>
     <li><span class="dfn-paneled" id="1547df8e">Availability</span>
     <li><span class="dfn-paneled" id="86e73a86">CreateMonitorCallback</span>
     <li><span class="dfn-paneled" id="cfcead89">DestroyableModel</span>
     <li><span class="dfn-paneled" id="bd018051">AI task source</span>
     <li><span class="dfn-paneled" id="20c21e08">compute AI model availability</span>
     <li><span class="dfn-paneled" id="0e5d9c9b">compute language availability</span>
     <li><span class="dfn-paneled" id="55f631de">convert error information into an exception object</span>
     <li><span class="dfn-paneled" id="a68d4447">create an AI model object</span>
     <li><span class="dfn-paneled" id="4803ece7">destruction abort controller</span>
     <li><span class="dfn-paneled" id="4c784101">details</span>
     <li><span class="dfn-paneled" id="fbddf9da">DOMException error information</span>
     <li><span class="dfn-paneled" id="7ef1b769">error information</span>
     <li><span class="dfn-paneled" id="3259cbdf">get a streaming AI model result</span>
     <li><span class="dfn-paneled" id="8f0df616">get an aggregated AI model result</span>
     <li><span class="dfn-paneled" id="009972c7">get the language availabilities partition</span>
     <li><span class="dfn-paneled" id="43e66b65">measure AI model input usage</span>
     <li><span class="dfn-paneled" id="cb847257">name</span>
     <li><span class="dfn-paneled" id="06427a90">quota</span>
     <li><span class="dfn-paneled" id="adcb77b0">quota exceeded error information</span>
     <li><span class="dfn-paneled" id="6aa88e8c">requested</span>
     <li><span class="dfn-paneled" id="814c5352">validate and canonicalize language tags</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecma-402">[ECMA-402]
   <dd><a href="https://tc39.es/ecma402/"><cite>ECMAScript Internationalization API Specification</cite></a>. URL: <a href="https://tc39.es/ecma402/">https://tc39.es/ecma402/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-streams">[STREAMS]
   <dd>Adam Rice; et al. <a href="https://streams.spec.whatwg.org/"><cite>Streams Standard</cite></a>. Living Standard. URL: <a href="https://streams.spec.whatwg.org/">https://streams.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
   <dt id="biblio-writing-assistance-apis">[WRITING-ASSISTANCE-APIS]
   <dd><a href="https://webmachinelearning.github.io/writing-assistance-apis/"><cite>Writing Assistance APIs</cite></a>. Draft Community Group Report. URL: <a href="https://webmachinelearning.github.io/writing-assistance-apis/">https://webmachinelearning.github.io/writing-assistance-apis/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-bcp47">[BCP47]
   <dd>A. Phillips, Ed.; M. Davis, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc5646"><cite>Tags for Identifying Languages</cite></a>. September 2009. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
   <dt id="biblio-uts35">[UTS35]
   <dd>Mark Davis; et al. <a href="https://www.unicode.org/reports/tr35/tr35-61/tr35.html"><cite>Unicode Locale Data Markup Language (LDML)</cite></a>. 23 October 2020. Unicode Technical Standard #35. URL: <a href="https://www.unicode.org/reports/tr35/tr35-61/tr35.html">https://www.unicode.org/reports/tr35/tr35-61/tr35.html</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#translator"><code><c- g>Translator</c-></code></a> {
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#translator"><c- n>Translator</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-create"><c- g>create</c-></a>(<a data-link-type="idl-name" href="#dictdef-translatorcreateoptions"><c- n>TranslatorCreateOptions</c-></a> <a href="#dom-translator-create-options-options"><code><c- g>options</c-></code></a>);
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability"><c- n>Availability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-availability"><c- g>availability</c-></a>(<a data-link-type="idl-name" href="#dictdef-translatorcreatecoreoptions"><c- n>TranslatorCreateCoreOptions</c-></a> <a href="#dom-translator-availability-options-options"><code><c- g>options</c-></code></a>);

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-translate"><c- g>translate</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-translator-translate-input-options-input"><code><c- g>input</c-></code></a>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions"><c- n>TranslatorTranslateOptions</c-></a> <a href="#dom-translator-translate-input-options-options"><code><c- g>options</c-></code></a> = {}
  );
  <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#readablestream"><c- n>ReadableStream</c-></a> <a class="idl-code" data-link-type="method" href="#dom-translator-translatestreaming"><c- g>translateStreaming</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-translator-translatestreaming-input-options-input"><code><c- g>input</c-></code></a>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions"><c- n>TranslatorTranslateOptions</c-></a> <a href="#dom-translator-translatestreaming-input-options-options"><code><c- g>options</c-></code></a> = {}
  );

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-translator-sourcelanguage"><c- g>sourceLanguage</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-translator-targetlanguage"><c- g>targetLanguage</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-translator-measureinputusage"><c- g>measureInputUsage</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-translator-measureinputusage-input-options-input"><code><c- g>input</c-></code></a>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-translatortranslateoptions"><c- n>TranslatorTranslateOptions</c-></a> <a href="#dom-translator-measureinputusage-input-options-options"><code><c- g>options</c-></code></a> = {}
  );
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unrestricted double" href="#dom-translator-inputquota"><c- g>inputQuota</c-></a>;
};
<a data-link-type="idl-name" href="#translator"><c- n>Translator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel"><c- n>DestroyableModel</c-></a>;

<c- b>dictionary</c-> <a href="#dictdef-translatorcreatecoreoptions"><code><c- g>TranslatorCreateCoreOptions</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-translatorcreatecoreoptions-sourcelanguage"><code><c- g>sourceLanguage</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-translatorcreatecoreoptions-targetlanguage"><code><c- g>targetLanguage</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-translatorcreateoptions"><code><c- g>TranslatorCreateOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-translatorcreatecoreoptions"><c- n>TranslatorCreateCoreOptions</c-></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-translatorcreateoptions-signal"><code><c- g>signal</c-></code></a>;
  <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback"><c- n>CreateMonitorCallback</c-></a> <a data-type="CreateMonitorCallback" href="#dom-translatorcreateoptions-monitor"><code><c- g>monitor</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-translatortranslateoptions"><code><c- g>TranslatorTranslateOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-translatortranslateoptions-signal"><code><c- g>signal</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#languagedetector"><code><c- g>LanguageDetector</c-></code></a> {
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#languagedetector"><c- n>LanguageDetector</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-create"><c- g>create</c-></a>(
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectorcreateoptions"><c- n>LanguageDetectorCreateOptions</c-></a> <a href="#dom-languagedetector-create-options-options"><code><c- g>options</c-></code></a> = {}
  );
  <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability"><c- n>Availability</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-availability"><c- g>availability</c-></a>(
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectorcreatecoreoptions"><c- n>LanguageDetectorCreateCoreOptions</c-></a> <a href="#dom-languagedetector-availability-options-options"><code><c- g>options</c-></code></a> = {}
  );

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-languagedetectionresult"><c- n>LanguageDetectionResult</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-detect"><c- g>detect</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-languagedetector-detect-input-options-input"><code><c- g>input</c-></code></a>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectordetectoptions"><c- n>LanguageDetectorDetectOptions</c-></a> <a href="#dom-languagedetector-detect-input-options-options"><code><c- g>options</c-></code></a> = {}
  );

  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="FrozenArray<DOMString>?" href="#dom-languagedetector-expectedinputlanguages"><c- g>expectedInputLanguages</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-languagedetector-measureinputusage"><c- g>measureInputUsage</c-></a>(
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-languagedetector-measureinputusage-input-options-input"><code><c- g>input</c-></code></a>,
    <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-languagedetectordetectoptions"><c- n>LanguageDetectorDetectOptions</c-></a> <a href="#dom-languagedetector-measureinputusage-input-options-options"><code><c- g>options</c-></code></a> = {}
  );
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unrestricted double" href="#dom-languagedetector-inputquota"><c- g>inputQuota</c-></a>;
};
<a data-link-type="idl-name" href="#languagedetector"><c- n>LanguageDetector</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel"><c- n>DestroyableModel</c-></a>;

<c- b>dictionary</c-> <a href="#dictdef-languagedetectorcreatecoreoptions"><code><c- g>LanguageDetectorCreateCoreOptions</c-></code></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-languagedetectorcreatecoreoptions-expectedinputlanguages"><code><c- g>expectedInputLanguages</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-languagedetectorcreateoptions"><code><c- g>LanguageDetectorCreateOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-languagedetectorcreatecoreoptions"><c- n>LanguageDetectorCreateCoreOptions</c-></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-languagedetectorcreateoptions-signal"><code><c- g>signal</c-></code></a>;
  <a data-link-type="idl-name" href="https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback"><c- n>CreateMonitorCallback</c-></a> <a data-type="CreateMonitorCallback" href="#dom-languagedetectorcreateoptions-monitor"><code><c- g>monitor</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-languagedetectordetectoptions"><code><c- g>LanguageDetectorDetectOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-languagedetectordetectoptions-signal"><code><c- g>signal</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-languagedetectionresult"><code><c- g>LanguageDetectionResult</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-languagedetectionresult-detectedlanguage"><code><c- g>detectedLanguage</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-languagedetectionresult-confidence"><code><c- g>confidence</c-></code></a>;
};

</pre>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"009972c7": {"dfnID":"009972c7","dfnText":"get the language availabilities partition","external":true,"refSections":[{"refs":[{"id":"ref-for-get-the-language-availabilities-partition"}],"title":"4.2. Availability"},{"refs":[{"id":"ref-for-get-the-language-availabilities-partition\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-the-language-availabilities-partition"},
"06427a90": {"dfnID":"06427a90","dfnText":"quota","external":true,"refSections":[{"refs":[{"id":"ref-for-quota-exceeded-error-information-quota"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-quota-exceeded-error-information-quota\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-quota"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"},{"id":"ref-for-string\u2460"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-string\u2461"},{"id":"ref-for-string\u2462"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-string\u2463"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-string\u2464"}],"title":"4.4.1. The algorithm"},{"refs":[{"id":"ref-for-string\u2465"}],"title":"4.4.2. Usage"}],"url":"https://infra.spec.whatwg.org/#string"},
"0be3911e": {"dfnID":"0be3911e","dfnText":"NotReadableError","external":true,"refSections":[{"refs":[{"id":"ref-for-notreadableerror"}],"title":"3.4.3. Errors"}],"url":"https://webidl.spec.whatwg.org/#notreadableerror"},
"0d4d33cf": {"dfnID":"0d4d33cf","dfnText":"\"downloading\"","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-availability-downloading"},{"id":"ref-for-dom-availability-downloading\u2460"}],"title":"3.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloading"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"0e5d9c9b": {"dfnID":"0e5d9c9b","dfnText":"compute language availability","external":true,"refSections":[{"refs":[{"id":"ref-for-compute-language-availability"}],"title":"4.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#compute-language-availability"},
"0e5dca01": {"dfnID":"0e5dca01","dfnText":"LookupMatchingLocaleByBestFit","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-lookupmatchinglocalebybestfit"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2460"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2461"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2462"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2463"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2464"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2465"},{"id":"ref-for-sec-lookupmatchinglocalebybestfit\u2466"}],"title":"3.2. Availability"}],"url":"https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit"},
"0e8de730": {"dfnID":"0e8de730","dfnText":"tuple","external":true,"refSections":[{"refs":[{"id":"ref-for-tuple"}],"title":"3.2. Availability"}],"url":"https://infra.spec.whatwg.org/#tuple"},
"0fa357c3": {"dfnID":"0fa357c3","dfnText":"length","external":true,"refSections":[{"refs":[{"id":"ref-for-string-length"},{"id":"ref-for-string-length\u2460"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-string-length\u2461"},{"id":"ref-for-string-length\u2462"}],"title":"4.4.2. Usage"}],"url":"https://infra.spec.whatwg.org/#string-length"},
"0fe84b59": {"dfnID":"0fe84b59","dfnText":"signal","external":true,"refSections":[{"refs":[{"id":"ref-for-abortcontroller-signal"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#abortcontroller-signal"},
"11e0b87f": {"dfnID":"11e0b87f","dfnText":"unrestricted double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unrestricted-double"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-idl-unrestricted-double\u2460"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#idl-unrestricted-double"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"}],"title":"4.3. The LanguageDetector class"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"12d6b9a8": {"dfnID":"12d6b9a8","dfnText":"values","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-values"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"1547df8e": {"dfnID":"1547df8e","dfnText":"Availability","external":true,"refSections":[{"refs":[{"id":"ref-for-enumdef-availability"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-enumdef-availability\u2460"},{"id":"ref-for-enumdef-availability\u2461"},{"id":"ref-for-enumdef-availability\u2462"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-enumdef-availability\u2463"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-enumdef-availability\u2464"}],"title":"4.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability"},
"1570624a": {"dfnID":"1570624a","dfnText":"default allowlist","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist"}],"title":"3.5. Permissions policy integration"},{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist\u2460"}],"title":"4.5. Permissions policy integration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"},
"15e48c39": {"dfnID":"15e48c39","dfnText":"set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"},{"id":"ref-for-ordered-set\u2460"},{"id":"ref-for-ordered-set\u2461"}],"title":"3.2. Availability"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"20c21e08": {"dfnID":"20c21e08","dfnText":"compute AI model availability","external":true,"refSections":[{"refs":[{"id":"ref-for-compute-ai-model-availability"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-compute-ai-model-availability\u2460"}],"title":"4.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#compute-ai-model-availability"},
"28e64574": {"dfnID":"28e64574","dfnText":"abort reason","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-abort-reason"},{"id":"ref-for-abortsignal-abort-reason\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#abortsignal-abort-reason"},
"31db57e6": {"dfnID":"31db57e6","dfnText":"keys","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-keys"},{"id":"ref-for-map-getting-the-keys\u2460"}],"title":"3.2. Availability"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"3259cbdf": {"dfnID":"3259cbdf","dfnText":"get a streaming AI model result","external":true,"refSections":[{"refs":[{"id":"ref-for-get-a-streaming-ai-model-result"}],"title":"3.3. The Translator class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-a-streaming-ai-model-result"},
"333b39ba": {"dfnID":"333b39ba","dfnText":"'self'","external":true,"refSections":[{"refs":[{"id":"ref-for-default-allowlist-self"}],"title":"3.5. Permissions policy integration"},{"refs":[{"id":"ref-for-default-allowlist-self\u2460"}],"title":"4.5. Permissions policy integration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#default-allowlist-self"},
"3349d69f": {"dfnID":"3349d69f","dfnText":"associated Document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-window"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"34443090": {"dfnID":"34443090","dfnText":"OperationError","external":true,"refSections":[{"refs":[{"id":"ref-for-operationerror"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-operationerror\u2460"}],"title":"4.1. Creation"}],"url":"https://webidl.spec.whatwg.org/#operationerror"},
"3b90bdcd": {"dfnID":"3b90bdcd","dfnText":"resolve","external":true,"refSections":[{"refs":[{"id":"ref-for-resolve"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#resolve"},
"3fca5a9e": {"dfnID":"3fca5a9e","dfnText":"map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"},{"id":"ref-for-ordered-map\u2460"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-ordered-map\u2461"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"},{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"},{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"},{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-this\u2460\u2463"},{"id":"ref-for-this\u2460\u2464"},{"id":"ref-for-this\u2460\u2465"},{"id":"ref-for-this\u2460\u2466"},{"id":"ref-for-this\u2460\u2467"},{"id":"ref-for-this\u2460\u2468"},{"id":"ref-for-this\u2461\u24ea"},{"id":"ref-for-this\u2461\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#this"},
"43e66b65": {"dfnID":"43e66b65","dfnText":"measure AI model input usage","external":true,"refSections":[{"refs":[{"id":"ref-for-measure-ai-model-input-usage"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-measure-ai-model-input-usage\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#measure-ai-model-input-usage"},
"44959ae4": {"dfnID":"44959ae4","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-domexception-name"},{"id":"ref-for-domexception-name\u2460"}],"title":"3.4.3. Errors"},{"refs":[{"id":"ref-for-domexception-name\u2461"},{"id":"ref-for-domexception-name\u2462"}],"title":"4.4.3. Errors"}],"url":"https://webidl.spec.whatwg.org/#domexception-name"},
"45209803": {"dfnID":"45209803","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-map-iterate"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-map-iterate\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-iterate"},
"4803ece7": {"dfnID":"4803ece7","dfnText":"destruction abort controller","external":true,"refSections":[{"refs":[{"id":"ref-for-destroyablemodel-destruction-abort-controller"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel-destruction-abort-controller"},
"48438eb3": {"dfnID":"48438eb3","dfnText":"queue a global task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-global-task"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"4ad913ae": {"dfnID":"4ad913ae","dfnText":"surrounding agent","external":true,"refSections":[{"refs":[{"id":"ref-for-surrounding-agent"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-surrounding-agent\u2460"}],"title":"4.1. Creation"}],"url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#surrounding-agent"},
"4c784101": {"dfnID":"4c784101","dfnText":"details","external":true,"refSections":[{"refs":[{"id":"ref-for-domexception-error-information-details"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-domexception-error-information-details\u2460"}],"title":"4.1. Creation"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-details"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"},{"id":"ref-for-list-append\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"535dd335": {"dfnID":"535dd335","dfnText":"aborted","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-aborted"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#abortsignal-aborted"},
"55f631de": {"dfnID":"55f631de","dfnText":"convert error information into an exception object","external":true,"refSections":[{"refs":[{"id":"ref-for-convert-error-information-into-an-exception-object"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#convert-error-information-into-an-exception-object"},
"5991ccfb": {"dfnID":"5991ccfb","dfnText":"relevant realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-realm"},{"id":"ref-for-concept-relevant-realm\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"59ed4e57": {"dfnID":"59ed4e57","dfnText":"ReadableStream","external":true,"refSections":[{"refs":[{"id":"ref-for-readablestream"}],"title":"3. The translator API"}],"url":"https://streams.spec.whatwg.org/#readablestream"},
"5afbefcd": {"dfnID":"5afbefcd","dfnText":"item","external":true,"refSections":[{"refs":[{"id":"ref-for-list-item"},{"id":"ref-for-list-item\u2460"}],"title":"3.2. Availability"}],"url":"https://infra.spec.whatwg.org/#list-item"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#list"},
"6aa88e8c": {"dfnID":"6aa88e8c","dfnText":"requested","external":true,"refSections":[{"refs":[{"id":"ref-for-quota-exceeded-error-information-requested"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-quota-exceeded-error-information-requested\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-requested"},
"6b815fdd": {"dfnID":"6b815fdd","dfnText":"is empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-is-empty"}],"title":"4.1. Creation"}],"url":"https://infra.spec.whatwg.org/#list-is-empty"},
"747aef8a": {"dfnID":"747aef8a","dfnText":"\"available\"","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-availability-available"},{"id":"ref-for-dom-availability-available\u2460"},{"id":"ref-for-dom-availability-available\u2461"},{"id":"ref-for-dom-availability-available\u2462"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-dom-availability-available\u2463"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"},{"id":"ref-for-assert\u2460"},{"id":"ref-for-assert\u2461"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-assert\u2462"},{"id":"ref-for-assert\u2463"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-assert\u2464"},{"id":"ref-for-assert\u2465"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-assert\u2466"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-assert\u2467"},{"id":"ref-for-assert\u2468"},{"id":"ref-for-assert\u2460\u24ea"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-assert\u2460\u2460"}],"title":"4.2. Availability"},{"refs":[{"id":"ref-for-assert\u2460\u2461"},{"id":"ref-for-assert\u2460\u2462"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-assert\u2460\u2463"},{"id":"ref-for-assert\u2460\u2464"},{"id":"ref-for-assert\u2460\u2465"}],"title":"4.4.1. The algorithm"},{"refs":[{"id":"ref-for-assert\u2460\u2466"}],"title":"4.4.2. Usage"}],"url":"https://infra.spec.whatwg.org/#assert"},
"797018a7": {"dfnID":"797018a7","dfnText":"InvalidStateError","external":true,"refSections":[{"refs":[{"id":"ref-for-invalidstateerror"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#invalidstateerror"},
"7b0d918d": {"dfnID":"7b0d918d","dfnText":"break","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-break"},{"id":"ref-for-iteration-break\u2460"},{"id":"ref-for-iteration-break\u2461"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-iteration-break\u2462"},{"id":"ref-for-iteration-break\u2463"},{"id":"ref-for-iteration-break\u2464"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#iteration-break"},
"7ef1b769": {"dfnID":"7ef1b769","dfnText":"error information","external":true,"refSections":[{"refs":[{"id":"ref-for-error-information"},{"id":"ref-for-error-information\u2460"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-error-information\u2461"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-error-information\u2462"},{"id":"ref-for-error-information\u2463"},{"id":"ref-for-error-information\u2464"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#error-information"},
"802b0fdd": {"dfnID":"802b0fdd","dfnText":"value","external":true,"refSections":[{"refs":[{"id":"ref-for-map-value"},{"id":"ref-for-map-value\u2460"},{"id":"ref-for-map-value\u2461"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-map-value\u2462"},{"id":"ref-for-map-value\u2463"},{"id":"ref-for-map-value\u2464"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-value"},
"814c5352": {"dfnID":"814c5352","dfnText":"validate and canonicalize language tags","external":true,"refSections":[{"refs":[{"id":"ref-for-validate-and-canonicalize-language-tags"},{"id":"ref-for-validate-and-canonicalize-language-tags\u2460"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-validate-and-canonicalize-language-tags\u2461"}],"title":"4.1. Creation"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags"},
"81dd847b": {"dfnID":"81dd847b","dfnText":"UnknownError","external":true,"refSections":[{"refs":[{"id":"ref-for-unknownerror"}],"title":"3.4.3. Errors"},{"refs":[{"id":"ref-for-unknownerror\u2460"}],"title":"4.4.3. Errors"}],"url":"https://webidl.spec.whatwg.org/#unknownerror"},
"842d5baf": {"dfnID":"842d5baf","dfnText":"sort in descending order","external":true,"refSections":[{"refs":[{"id":"ref-for-map-sort-in-descending-order"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-sort-in-descending-order"},
"860300d4": {"dfnID":"860300d4","dfnText":"implementation-defined","external":true,"refSections":[{"refs":[{"id":"ref-for-implementation-defined"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-implementation-defined\u2460"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-implementation-defined\u2461"},{"id":"ref-for-implementation-defined\u2462"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-implementation-defined\u2463"}],"title":"3.4.3. Errors"},{"refs":[{"id":"ref-for-implementation-defined\u2464"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-implementation-defined\u2465"},{"id":"ref-for-implementation-defined\u2466"},{"id":"ref-for-implementation-defined\u2467"},{"id":"ref-for-implementation-defined\u2468"}],"title":"4.4.1. The algorithm"},{"refs":[{"id":"ref-for-implementation-defined\u2460\u24ea"},{"id":"ref-for-implementation-defined\u2460\u2460"}],"title":"4.4.2. Usage"},{"refs":[{"id":"ref-for-implementation-defined\u2460\u2461"}],"title":"4.4.3. Errors"}],"url":"https://infra.spec.whatwg.org/#implementation-defined"},
"86e73a86": {"dfnID":"86e73a86","dfnText":"CreateMonitorCallback","external":true,"refSections":[{"refs":[{"id":"ref-for-callbackdef-createmonitorcallback"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-callbackdef-createmonitorcallback\u2460"}],"title":"4. The language detector API"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback"},
"87bc23a5": {"dfnID":"87bc23a5","dfnText":"add","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal-add"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#abortsignal-add"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"},{"id":"ref-for-idl-DOMString\u2460\u24ea"},{"id":"ref-for-idl-DOMString\u2460\u2460"},{"id":"ref-for-idl-DOMString\u2460\u2461"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u2462"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8958b003": {"dfnID":"8958b003","dfnText":"entry","external":true,"refSections":[{"refs":[{"id":"ref-for-map-entry"},{"id":"ref-for-map-entry\u2460"},{"id":"ref-for-map-entry\u2461"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-map-entry\u2462"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-entry"},
"8c800cdf": {"dfnID":"8c800cdf","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-idl-double\u2460"},{"id":"ref-for-idl-double\u2461"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#idl-double"},
"8f0df616": {"dfnID":"8f0df616","dfnText":"get an aggregated AI model result","external":true,"refSections":[{"refs":[{"id":"ref-for-get-an-aggregated-ai-model-result"}],"title":"3.3. The Translator class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-an-aggregated-ai-model-result"},
"915aff5e": {"dfnID":"915aff5e","dfnText":"code point","external":true,"refSections":[{"refs":[{"id":"ref-for-code-point"},{"id":"ref-for-code-point\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#code-point"},
"93e4c9ae": {"dfnID":"93e4c9ae","dfnText":"Unicode canonicalized locale identifier","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-language-tags"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-sec-language-tags\u2460"},{"id":"ref-for-sec-language-tags\u2461"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-sec-language-tags\u2462"},{"id":"ref-for-sec-language-tags\u2463"}],"title":"3.4.2. Usage"}],"url":"https://tc39.es/ecma402/#sec-language-tags"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"}],"title":"4.3. The LanguageDetector class"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"a5f015e3": {"dfnID":"a5f015e3","dfnText":"realm","external":true,"refSections":[{"refs":[{"id":"ref-for-realm"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-realm\u2460"}],"title":"4.1. Creation"}],"url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm"},
"a68d4447": {"dfnID":"a68d4447","dfnText":"create an AI model object","external":true,"refSections":[{"refs":[{"id":"ref-for-create-an-ai-model-object"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-create-an-ai-model-object\u2460"}],"title":"4.1. Creation"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#create-an-ai-model-object"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"},{"id":"ref-for-in-parallel\u2460"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-in-parallel\u2461"},{"id":"ref-for-in-parallel\u2462"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-in-parallel\u2463"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-in-parallel\u2464"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-in-parallel\u2465"},{"id":"ref-for-in-parallel\u2466"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-in-parallel\u2467"}],"title":"4.2. Availability"},{"refs":[{"id":"ref-for-in-parallel\u2468"},{"id":"ref-for-in-parallel\u2460\u24ea"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2460"}],"title":"4.4.1. The algorithm"},{"refs":[{"id":"ref-for-in-parallel\u2460\u2461"}],"title":"4.4.2. Usage"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"adcb77b0": {"dfnID":"adcb77b0","dfnText":"quota exceeded error information","external":true,"refSections":[{"refs":[{"id":"ref-for-quota-exceeded-error-information"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-quota-exceeded-error-information\u2460"}],"title":"4.4.1. The algorithm"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information"},
"b262501e": {"dfnID":"b262501e","dfnText":"reject","external":true,"refSections":[{"refs":[{"id":"ref-for-reject"},{"id":"ref-for-reject\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#reject"},
"b75bb3bd": {"dfnID":"b75bb3bd","dfnText":"SecureContext","external":true,"refSections":[{"refs":[{"id":"ref-for-SecureContext"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-SecureContext\u2460"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#SecureContext"},
"b78d6a64": {"dfnID":"b78d6a64","dfnText":"event loop (for agent)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-agent-event-loop"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-concept-agent-event-loop\u2460"}],"title":"4.1. Creation"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop"},
"ba556545": {"dfnID":"ba556545","dfnText":"NotAllowedError","external":true,"refSections":[{"refs":[{"id":"ref-for-notallowederror"}],"title":"3.4.3. Errors"},{"refs":[{"id":"ref-for-notallowederror\u2460"}],"title":"4.4.3. Errors"}],"url":"https://webidl.spec.whatwg.org/#notallowederror"},
"bd018051": {"dfnID":"bd018051","dfnText":"AI task source","external":true,"refSections":[{"refs":[{"id":"ref-for-ai-task-source"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#ai-task-source"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"},{"id":"ref-for-idl-promise\u2461"},{"id":"ref-for-idl-promise\u2462"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-idl-promise\u2463"},{"id":"ref-for-idl-promise\u2464"},{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"}],"title":"4. The language detector API"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"c537c824": {"dfnID":"c537c824","dfnText":"creating a frozen array","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-create-frozen-array"}],"title":"4.1. Creation"}],"url":"https://webidl.spec.whatwg.org/#dfn-create-frozen-array"},
"c6d19e56": {"dfnID":"c6d19e56","dfnText":"event loop","external":true,"refSections":[{"refs":[{"id":"ref-for-event-loop"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"c9db6cec": {"dfnID":"c9db6cec","dfnText":"create a dependent abort signal","external":true,"refSections":[{"refs":[{"id":"ref-for-create-a-dependent-abort-signal"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"},
"cb847257": {"dfnID":"cb847257","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-domexception-error-information-name"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-domexception-error-information-name\u2460"}],"title":"4.1. Creation"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-name"},
"cc890cc1": {"dfnID":"cc890cc1","dfnText":"policy-controlled feature","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature"}],"title":"3.5. Permissions policy integration"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460"}],"title":"4.5. Permissions policy integration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"cca3cdb2": {"dfnID":"cca3cdb2","dfnText":"AbortSignal","external":true,"refSections":[{"refs":[{"id":"ref-for-abortsignal"},{"id":"ref-for-abortsignal\u2460"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-abortsignal\u2461"},{"id":"ref-for-abortsignal\u2462"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-abortsignal\u2463"}],"title":"4.3. The LanguageDetector class"}],"url":"https://dom.spec.whatwg.org/#abortsignal"},
"cfcead89": {"dfnID":"cfcead89","dfnText":"DestroyableModel","external":true,"refSections":[{"refs":[{"id":"ref-for-destroyablemodel"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-destroyablemodel\u2460"}],"title":"4. The language detector API"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel"},
"compute-language-detector-options-availability": {"dfnID":"compute-language-detector-options-availability","dfnText":"compute language detector options availability","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-language-detector-options-availability"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-compute-language-detector-options-availability\u2460"}],"title":"4.2. Availability"}],"url":"#compute-language-detector-options-availability"},
"compute-translator-options-availability": {"dfnID":"compute-translator-options-availability","dfnText":"compute translator options availability","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-translator-options-availability"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-compute-translator-options-availability\u2460"}],"title":"3.2. Availability"}],"url":"#compute-translator-options-availability"},
"create-the-language-detector-object": {"dfnID":"create-the-language-detector-object","dfnText":"create the language detector object","external":false,"refSections":[{"refs":[{"id":"ref-for-create-the-language-detector-object"}],"title":"4.1. Creation"}],"url":"#create-the-language-detector-object"},
"create-the-translator-object": {"dfnID":"create-the-translator-object","dfnText":"create the translator object","external":false,"refSections":[{"refs":[{"id":"ref-for-create-the-translator-object"}],"title":"3.1. Creation"}],"url":"#create-the-translator-object"},
"d0b4a948": {"dfnID":"d0b4a948","dfnText":"a promise rejected with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with"},{"id":"ref-for-a-promise-rejected-with\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"d14a6f26": {"dfnID":"d14a6f26","dfnText":"key","external":true,"refSections":[{"refs":[{"id":"ref-for-map-key"},{"id":"ref-for-map-key\u2460"},{"id":"ref-for-map-key\u2461"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-map-key\u2462"}],"title":"4.4.1. The algorithm"}],"url":"https://infra.spec.whatwg.org/#map-key"},
"dacde8b5": {"dfnID":"dacde8b5","dfnText":"a new promise","external":true,"refSections":[{"refs":[{"id":"ref-for-a-new-promise"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"dca2de17": {"dfnID":"dca2de17","dfnText":"DOMException","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMException"},{"id":"ref-for-idl-DOMException\u2460"}],"title":"3.4.3. Errors"},{"refs":[{"id":"ref-for-idl-DOMException\u2461"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-idl-DOMException\u2462"},{"id":"ref-for-idl-DOMException\u2463"}],"title":"4.4.3. Errors"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"dcf5fafa": {"dfnID":"dcf5fafa","dfnText":"FrozenArray","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-frozen-array"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-idl-frozen-array\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"ded71193": {"dfnID":"ded71193","dfnText":"\"unavailable\"","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-availability-unavailable"},{"id":"ref-for-dom-availability-unavailable\u2460"}],"title":"3.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-unavailable"},
"detect-languages": {"dfnID":"detect-languages","dfnText":"detect languages","external":false,"refSections":[{"refs":[{"id":"ref-for-detect-languages"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-detect-languages\u2460"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-detect-languages\u2461"}],"title":"4.4.2. Usage"}],"url":"#detect-languages"},
"dictdef-languagedetectionresult": {"dfnID":"dictdef-languagedetectionresult","dfnText":"LanguageDetectionResult","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-languagedetectionresult"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-dictdef-languagedetectionresult\u2460"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-dictdef-languagedetectionresult\u2461"}],"title":"4.4.1. The algorithm"}],"url":"#dictdef-languagedetectionresult"},
"dictdef-languagedetectorcreatecoreoptions": {"dfnID":"dictdef-languagedetectorcreatecoreoptions","dfnText":"LanguageDetectorCreateCoreOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions"},{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2460"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2461"},{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2462"},{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2463"},{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2464"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-dictdef-languagedetectorcreatecoreoptions\u2465"}],"title":"4.2. Availability"}],"url":"#dictdef-languagedetectorcreatecoreoptions"},
"dictdef-languagedetectorcreateoptions": {"dfnID":"dictdef-languagedetectorcreateoptions","dfnText":"LanguageDetectorCreateOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-languagedetectorcreateoptions"}],"title":"4. The language detector API"}],"url":"#dictdef-languagedetectorcreateoptions"},
"dictdef-languagedetectordetectoptions": {"dfnID":"dictdef-languagedetectordetectoptions","dfnText":"LanguageDetectorDetectOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-languagedetectordetectoptions"},{"id":"ref-for-dictdef-languagedetectordetectoptions\u2460"}],"title":"4. The language detector API"}],"url":"#dictdef-languagedetectordetectoptions"},
"dictdef-translatorcreatecoreoptions": {"dfnID":"dictdef-translatorcreatecoreoptions","dfnText":"TranslatorCreateCoreOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-translatorcreatecoreoptions"},{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2460"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2461"},{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2462"},{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2463"},{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2464"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-dictdef-translatorcreatecoreoptions\u2465"}],"title":"3.2. Availability"}],"url":"#dictdef-translatorcreatecoreoptions"},
"dictdef-translatorcreateoptions": {"dfnID":"dictdef-translatorcreateoptions","dfnText":"TranslatorCreateOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-translatorcreateoptions"}],"title":"3. The translator API"}],"url":"#dictdef-translatorcreateoptions"},
"dictdef-translatortranslateoptions": {"dfnID":"dictdef-translatortranslateoptions","dfnText":"TranslatorTranslateOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-translatortranslateoptions"},{"id":"ref-for-dictdef-translatortranslateoptions\u2460"},{"id":"ref-for-dictdef-translatortranslateoptions\u2461"}],"title":"3. The translator API"}],"url":"#dictdef-translatortranslateoptions"},
"dom-languagedetectionresult-confidence": {"dfnID":"dom-languagedetectionresult-confidence","dfnText":"confidence","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetectionresult-confidence"},{"id":"ref-for-dom-languagedetectionresult-confidence\u2460"}],"title":"4.4.1. The algorithm"}],"url":"#dom-languagedetectionresult-confidence"},
"dom-languagedetectionresult-detectedlanguage": {"dfnID":"dom-languagedetectionresult-detectedlanguage","dfnText":"detectedLanguage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetectionresult-detectedlanguage"},{"id":"ref-for-dom-languagedetectionresult-detectedlanguage\u2460"}],"title":"4.4.1. The algorithm"}],"url":"#dom-languagedetectionresult-detectedlanguage"},
"dom-languagedetector-availability": {"dfnID":"dom-languagedetector-availability","dfnText":"availability(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-availability"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-availability"},
"dom-languagedetector-availability-options-options": {"dfnID":"dom-languagedetector-availability-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-languagedetector-availability-options-options"},
"dom-languagedetector-create": {"dfnID":"dom-languagedetector-create","dfnText":"create(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-create"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-create"},
"dom-languagedetector-create-options-options": {"dfnID":"dom-languagedetector-create-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-languagedetector-create-options-options"},
"dom-languagedetector-detect": {"dfnID":"dom-languagedetector-detect","dfnText":"detect(input, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-detect"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-detect"},
"dom-languagedetector-detect-input-options-input": {"dfnID":"dom-languagedetector-detect-input-options-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-languagedetector-detect-input-options-input"},
"dom-languagedetector-detect-input-options-options": {"dfnID":"dom-languagedetector-detect-input-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-languagedetector-detect-input-options-options"},
"dom-languagedetector-expectedinputlanguages": {"dfnID":"dom-languagedetector-expectedinputlanguages","dfnText":"expectedInputLanguages","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-expectedinputlanguages"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-expectedinputlanguages"},
"dom-languagedetector-inputquota": {"dfnID":"dom-languagedetector-inputquota","dfnText":"inputQuota","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-inputquota"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-inputquota"},
"dom-languagedetector-measureinputusage": {"dfnID":"dom-languagedetector-measureinputusage","dfnText":"measureInputUsage(input, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetector-measureinputusage"}],"title":"4. The language detector API"}],"url":"#dom-languagedetector-measureinputusage"},
"dom-languagedetector-measureinputusage-input-options-input": {"dfnID":"dom-languagedetector-measureinputusage-input-options-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-languagedetector-measureinputusage-input-options-input"},
"dom-languagedetector-measureinputusage-input-options-options": {"dfnID":"dom-languagedetector-measureinputusage-input-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-languagedetector-measureinputusage-input-options-options"},
"dom-languagedetectorcreatecoreoptions-expectedinputlanguages": {"dfnID":"dom-languagedetectorcreatecoreoptions-expectedinputlanguages","dfnText":"expectedInputLanguages","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages"},{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages\u2460"},{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages\u2461"},{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages\u2462"},{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages\u2463"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-dom-languagedetectorcreatecoreoptions-expectedinputlanguages\u2464"}],"title":"4.2. Availability"}],"url":"#dom-languagedetectorcreatecoreoptions-expectedinputlanguages"},
"dom-languagedetectorcreateoptions-monitor": {"dfnID":"dom-languagedetectorcreateoptions-monitor","dfnText":"monitor","external":false,"refSections":[],"url":"#dom-languagedetectorcreateoptions-monitor"},
"dom-languagedetectorcreateoptions-signal": {"dfnID":"dom-languagedetectorcreateoptions-signal","dfnText":"signal","external":false,"refSections":[],"url":"#dom-languagedetectorcreateoptions-signal"},
"dom-languagedetectordetectoptions-signal": {"dfnID":"dom-languagedetectordetectoptions-signal","dfnText":"signal","external":false,"refSections":[],"url":"#dom-languagedetectordetectoptions-signal"},
"dom-translator-availability": {"dfnID":"dom-translator-availability","dfnText":"availability(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-availability"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-dom-translator-availability\u2460"}],"title":"3.2. Availability"}],"url":"#dom-translator-availability"},
"dom-translator-availability-options-options": {"dfnID":"dom-translator-availability-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-translator-availability-options-options"},
"dom-translator-create": {"dfnID":"dom-translator-create","dfnText":"create(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-create"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-dom-translator-create\u2460"}],"title":"3.2. Availability"}],"url":"#dom-translator-create"},
"dom-translator-create-options-options": {"dfnID":"dom-translator-create-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-translator-create-options-options"},
"dom-translator-inputquota": {"dfnID":"dom-translator-inputquota","dfnText":"inputQuota","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-inputquota"}],"title":"3. The translator API"}],"url":"#dom-translator-inputquota"},
"dom-translator-measureinputusage": {"dfnID":"dom-translator-measureinputusage","dfnText":"measureInputUsage(input, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-measureinputusage"}],"title":"3. The translator API"}],"url":"#dom-translator-measureinputusage"},
"dom-translator-measureinputusage-input-options-input": {"dfnID":"dom-translator-measureinputusage-input-options-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-translator-measureinputusage-input-options-input"},
"dom-translator-measureinputusage-input-options-options": {"dfnID":"dom-translator-measureinputusage-input-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-translator-measureinputusage-input-options-options"},
"dom-translator-sourcelanguage": {"dfnID":"dom-translator-sourcelanguage","dfnText":"sourceLanguage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-sourcelanguage"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-dom-translator-sourcelanguage\u2460"}],"title":"3.2. Availability"}],"url":"#dom-translator-sourcelanguage"},
"dom-translator-targetlanguage": {"dfnID":"dom-translator-targetlanguage","dfnText":"targetLanguage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-targetlanguage"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-dom-translator-targetlanguage\u2460"}],"title":"3.2. Availability"}],"url":"#dom-translator-targetlanguage"},
"dom-translator-translate": {"dfnID":"dom-translator-translate","dfnText":"translate(input, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-translate"}],"title":"3. The translator API"}],"url":"#dom-translator-translate"},
"dom-translator-translate-input-options-input": {"dfnID":"dom-translator-translate-input-options-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-translator-translate-input-options-input"},
"dom-translator-translate-input-options-options": {"dfnID":"dom-translator-translate-input-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-translator-translate-input-options-options"},
"dom-translator-translatestreaming": {"dfnID":"dom-translator-translatestreaming","dfnText":"translateStreaming(input, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translator-translatestreaming"}],"title":"3. The translator API"}],"url":"#dom-translator-translatestreaming"},
"dom-translator-translatestreaming-input-options-input": {"dfnID":"dom-translator-translatestreaming-input-options-input","dfnText":"input","external":false,"refSections":[],"url":"#dom-translator-translatestreaming-input-options-input"},
"dom-translator-translatestreaming-input-options-options": {"dfnID":"dom-translator-translatestreaming-input-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-translator-translatestreaming-input-options-options"},
"dom-translatorcreatecoreoptions-sourcelanguage": {"dfnID":"dom-translatorcreatecoreoptions-sourcelanguage","dfnText":"sourceLanguage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2460"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2461"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2462"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2463"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2464"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2465"},{"id":"ref-for-dom-translatorcreatecoreoptions-sourcelanguage\u2466"}],"title":"3.2. Availability"}],"url":"#dom-translatorcreatecoreoptions-sourcelanguage"},
"dom-translatorcreatecoreoptions-targetlanguage": {"dfnID":"dom-translatorcreatecoreoptions-targetlanguage","dfnText":"targetLanguage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2460"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2461"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2462"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2463"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2464"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2465"},{"id":"ref-for-dom-translatorcreatecoreoptions-targetlanguage\u2466"}],"title":"3.2. Availability"}],"url":"#dom-translatorcreatecoreoptions-targetlanguage"},
"dom-translatorcreateoptions-monitor": {"dfnID":"dom-translatorcreateoptions-monitor","dfnText":"monitor","external":false,"refSections":[],"url":"#dom-translatorcreateoptions-monitor"},
"dom-translatorcreateoptions-signal": {"dfnID":"dom-translatorcreateoptions-signal","dfnText":"signal","external":false,"refSections":[],"url":"#dom-translatorcreateoptions-signal"},
"dom-translatortranslateoptions-signal": {"dfnID":"dom-translatortranslateoptions-signal","dfnText":"signal","external":false,"refSections":[],"url":"#dom-translatortranslateoptions-signal"},
"download-the-language-detector-model": {"dfnID":"download-the-language-detector-model","dfnText":"download the language detector model","external":false,"refSections":[{"refs":[{"id":"ref-for-download-the-language-detector-model"}],"title":"4.1. Creation"}],"url":"#download-the-language-detector-model"},
"download-the-translation-model": {"dfnID":"download-the-translation-model","dfnText":"download the translation model","external":false,"refSections":[{"refs":[{"id":"ref-for-download-the-translation-model"}],"title":"3.1. Creation"}],"url":"#download-the-translation-model"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"}],"title":"4.3. The LanguageDetector class"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"fbddf9da": {"dfnID":"fbddf9da","dfnText":"DOMException error information","external":true,"refSections":[{"refs":[{"id":"ref-for-domexception-error-information"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-domexception-error-information\u2460"}],"title":"3.4.1. The algorithm"},{"refs":[{"id":"ref-for-domexception-error-information\u2461"},{"id":"ref-for-domexception-error-information\u2462"}],"title":"3.4.2. Usage"},{"refs":[{"id":"ref-for-domexception-error-information\u2463"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-domexception-error-information\u2464"},{"id":"ref-for-domexception-error-information\u2465"}],"title":"4.4.2. Usage"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information"},
"fe9b910d": {"dfnID":"fe9b910d","dfnText":"\"downloadable\"","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-availability-downloadable"},{"id":"ref-for-dom-availability-downloadable\u2460"},{"id":"ref-for-dom-availability-downloadable\u2461"}],"title":"3.2. Availability"}],"url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable"},
"initialize-the-language-detector-model": {"dfnID":"initialize-the-language-detector-model","dfnText":"initialize the language detector model","external":false,"refSections":[{"refs":[{"id":"ref-for-initialize-the-language-detector-model"}],"title":"4.1. Creation"}],"url":"#initialize-the-language-detector-model"},
"initialize-the-translation-model": {"dfnID":"initialize-the-translation-model","dfnText":"initialize the translation model","external":false,"refSections":[{"refs":[{"id":"ref-for-initialize-the-translation-model"}],"title":"3.1. Creation"}],"url":"#initialize-the-translation-model"},
"language-arc": {"dfnID":"language-arc","dfnText":"language arc","external":false,"refSections":[{"refs":[{"id":"ref-for-language-arc"},{"id":"ref-for-language-arc\u2460"},{"id":"ref-for-language-arc\u2461"},{"id":"ref-for-language-arc\u2462"},{"id":"ref-for-language-arc\u2463"},{"id":"ref-for-language-arc\u2464"},{"id":"ref-for-language-arc\u2465"},{"id":"ref-for-language-arc\u2466"},{"id":"ref-for-language-arc\u2467"},{"id":"ref-for-language-arc\u2468"},{"id":"ref-for-language-arc\u2460\u24ea"},{"id":"ref-for-language-arc\u2460\u2460"},{"id":"ref-for-language-arc\u2460\u2461"},{"id":"ref-for-language-arc\u2460\u2462"},{"id":"ref-for-language-arc\u2460\u2463"},{"id":"ref-for-language-arc\u2460\u2464"},{"id":"ref-for-language-arc\u2460\u2465"}],"title":"3.2. Availability"}],"url":"#language-arc"},
"language-arc-can-be-fulfilled-by-the-identity-translation": {"dfnID":"language-arc-can-be-fulfilled-by-the-identity-translation","dfnText":"can be fulfilled by the identity translation","external":false,"refSections":[{"refs":[{"id":"ref-for-language-arc-can-be-fulfilled-by-the-identity-translation"},{"id":"ref-for-language-arc-can-be-fulfilled-by-the-identity-translation\u2460"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-language-arc-can-be-fulfilled-by-the-identity-translation\u2461"}],"title":"3.4.1. The algorithm"}],"url":"#language-arc-can-be-fulfilled-by-the-identity-translation"},
"language-arc-overlaps": {"dfnID":"language-arc-overlaps","dfnText":"overlaps","external":false,"refSections":[{"refs":[{"id":"ref-for-language-arc-overlaps"},{"id":"ref-for-language-arc-overlaps\u2460"}],"title":"3.2. Availability"}],"url":"#language-arc-overlaps"},
"language-arc-source-language": {"dfnID":"language-arc-source-language","dfnText":"source language","external":false,"refSections":[{"refs":[{"id":"ref-for-language-arc-source-language"},{"id":"ref-for-language-arc-source-language\u2460"},{"id":"ref-for-language-arc-source-language\u2461"},{"id":"ref-for-language-arc-source-language\u2462"},{"id":"ref-for-language-arc-source-language\u2463"},{"id":"ref-for-language-arc-source-language\u2464"},{"id":"ref-for-language-arc-source-language\u2465"},{"id":"ref-for-language-arc-source-language\u2466"}],"title":"3.2. Availability"}],"url":"#language-arc-source-language"},
"language-arc-target-language": {"dfnID":"language-arc-target-language","dfnText":"target language","external":false,"refSections":[{"refs":[{"id":"ref-for-language-arc-target-language"},{"id":"ref-for-language-arc-target-language\u2460"},{"id":"ref-for-language-arc-target-language\u2461"},{"id":"ref-for-language-arc-target-language\u2462"},{"id":"ref-for-language-arc-target-language\u2463"},{"id":"ref-for-language-arc-target-language\u2464"},{"id":"ref-for-language-arc-target-language\u2465"},{"id":"ref-for-language-arc-target-language\u2466"}],"title":"3.2. Availability"}],"url":"#language-arc-target-language"},
"languagedetector": {"dfnID":"languagedetector","dfnText":"LanguageDetector","external":false,"refSections":[{"refs":[{"id":"ref-for-languagedetector"},{"id":"ref-for-languagedetector\u2460"}],"title":"4. The language detector API"},{"refs":[{"id":"ref-for-languagedetector\u2461"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-languagedetector\u2462"},{"id":"ref-for-languagedetector\u2463"},{"id":"ref-for-languagedetector\u2464"}],"title":"4.3. The LanguageDetector class"}],"url":"#languagedetector"},
"languagedetector-expected-input-languages": {"dfnID":"languagedetector-expected-input-languages","dfnText":"expected input languages","external":false,"refSections":[{"refs":[{"id":"ref-for-languagedetector-expected-input-languages"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-languagedetector-expected-input-languages\u2460"}],"title":"4.3. The LanguageDetector class"}],"url":"#languagedetector-expected-input-languages"},
"languagedetector-input-quota": {"dfnID":"languagedetector-input-quota","dfnText":"input quota","external":false,"refSections":[{"refs":[{"id":"ref-for-languagedetector-input-quota"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-languagedetector-input-quota\u2460"},{"id":"ref-for-languagedetector-input-quota\u2461"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-languagedetector-input-quota\u2462"}],"title":"4.4.2. Usage"}],"url":"#languagedetector-input-quota"},
"measure-language-detector-input-usage": {"dfnID":"measure-language-detector-input-usage","dfnText":"measure language detector input usage","external":false,"refSections":[{"refs":[{"id":"ref-for-measure-language-detector-input-usage"}],"title":"4.3. The LanguageDetector class"},{"refs":[{"id":"ref-for-measure-language-detector-input-usage\u2460"}],"title":"4.4.1. The algorithm"}],"url":"#measure-language-detector-input-usage"},
"measure-translator-input-usage": {"dfnID":"measure-translator-input-usage","dfnText":"measure translator input usage","external":false,"refSections":[{"refs":[{"id":"ref-for-measure-translator-input-usage"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-measure-translator-input-usage\u2460"}],"title":"3.4.1. The algorithm"}],"url":"#measure-translator-input-usage"},
"permissiondef-language-detector": {"dfnID":"permissiondef-language-detector","dfnText":"language-detector","external":false,"refSections":[{"refs":[{"id":"ref-for-permissiondef-language-detector"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-permissiondef-language-detector\u2460"}],"title":"4.2. Availability"}],"url":"#permissiondef-language-detector"},
"permissiondef-translator": {"dfnID":"permissiondef-translator","dfnText":"translator","external":false,"refSections":[{"refs":[{"id":"ref-for-permissiondef-translator"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-permissiondef-translator\u2460"}],"title":"3.2. Availability"}],"url":"#permissiondef-translator"},
"translate": {"dfnID":"translate","dfnText":"translate","external":false,"refSections":[{"refs":[{"id":"ref-for-translate"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-translate\u2460"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-translate\u2461"},{"id":"ref-for-translate\u2462"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-translate\u2463"}],"title":"3.4.2. Usage"}],"url":"#translate"},
"translator": {"dfnID":"translator","dfnText":"Translator","external":false,"refSections":[{"refs":[{"id":"ref-for-translator"},{"id":"ref-for-translator\u2460"}],"title":"3. The translator API"},{"refs":[{"id":"ref-for-translator\u2461"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-translator\u2462"}],"title":"3.2. Availability"},{"refs":[{"id":"ref-for-translator\u2463"},{"id":"ref-for-translator\u2464"},{"id":"ref-for-translator\u2465"},{"id":"ref-for-translator\u2466"}],"title":"3.3. The Translator class"}],"url":"#translator"},
"translator-input-quota": {"dfnID":"translator-input-quota","dfnText":"input quota","external":false,"refSections":[{"refs":[{"id":"ref-for-translator-input-quota"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-translator-input-quota\u2460"},{"id":"ref-for-translator-input-quota\u2461"},{"id":"ref-for-translator-input-quota\u2462"}],"title":"3.3. The Translator class"},{"refs":[{"id":"ref-for-translator-input-quota\u2463"}],"title":"3.4.2. Usage"}],"url":"#translator-input-quota"},
"translator-language-arc-availabilities": {"dfnID":"translator-language-arc-availabilities","dfnText":"translator language arc availabilities","external":false,"refSections":[{"refs":[{"id":"ref-for-translator-language-arc-availabilities"},{"id":"ref-for-translator-language-arc-availabilities\u2460"},{"id":"ref-for-translator-language-arc-availabilities\u2461"},{"id":"ref-for-translator-language-arc-availabilities\u2462"},{"id":"ref-for-translator-language-arc-availabilities\u2463"},{"id":"ref-for-translator-language-arc-availabilities\u2464"}],"title":"3.2. Availability"}],"url":"#translator-language-arc-availabilities"},
"translator-source-language": {"dfnID":"translator-source-language","dfnText":"source language","external":false,"refSections":[{"refs":[{"id":"ref-for-translator-source-language"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-translator-source-language\u2460"},{"id":"ref-for-translator-source-language\u2461"},{"id":"ref-for-translator-source-language\u2462"},{"id":"ref-for-translator-source-language\u2463"}],"title":"3.3. The Translator class"}],"url":"#translator-source-language"},
"translator-target-language": {"dfnID":"translator-target-language","dfnText":"target language","external":false,"refSections":[{"refs":[{"id":"ref-for-translator-target-language"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-translator-target-language\u2460"},{"id":"ref-for-translator-target-language\u2461"},{"id":"ref-for-translator-target-language\u2462"},{"id":"ref-for-translator-target-language\u2463"}],"title":"3.3. The Translator class"}],"url":"#translator-target-language"},
"validate-and-canonicalize-language-detector-options": {"dfnID":"validate-and-canonicalize-language-detector-options","dfnText":"validate and canonicalize language detector options","external":false,"refSections":[{"refs":[{"id":"ref-for-validate-and-canonicalize-language-detector-options"}],"title":"4.1. Creation"},{"refs":[{"id":"ref-for-validate-and-canonicalize-language-detector-options\u2460"}],"title":"4.2. Availability"}],"url":"#validate-and-canonicalize-language-detector-options"},
"validate-and-canonicalize-translator-options": {"dfnID":"validate-and-canonicalize-translator-options","dfnText":"validate and canonicalize translator options","external":false,"refSections":[{"refs":[{"id":"ref-for-validate-and-canonicalize-translator-options"}],"title":"3.1. Creation"},{"refs":[{"id":"ref-for-validate-and-canonicalize-translator-options\u2460"}],"title":"3.2. Availability"}],"url":"#validate-and-canonicalize-translator-options"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#compute-language-detector-options-availability": {"displayText":"compute language detector options availability","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"compute language detector options availability","type":"dfn","url":"#compute-language-detector-options-availability"},
"#compute-translator-options-availability": {"displayText":"compute translator options availability","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"compute translator options availability","type":"dfn","url":"#compute-translator-options-availability"},
"#create-the-language-detector-object": {"displayText":"create the language detector object","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"create the language detector object","type":"dfn","url":"#create-the-language-detector-object"},
"#create-the-translator-object": {"displayText":"create the translator object","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"create the translator object","type":"dfn","url":"#create-the-translator-object"},
"#detect-languages": {"displayText":"detect languages","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"detect languages","type":"dfn","url":"#detect-languages"},
"#dictdef-languagedetectionresult": {"displayText":"LanguageDetectionResult","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"LanguageDetectionResult","type":"dictionary","url":"#dictdef-languagedetectionresult"},
"#dictdef-languagedetectorcreatecoreoptions": {"displayText":"LanguageDetectorCreateCoreOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"LanguageDetectorCreateCoreOptions","type":"dictionary","url":"#dictdef-languagedetectorcreatecoreoptions"},
"#dictdef-languagedetectorcreateoptions": {"displayText":"LanguageDetectorCreateOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"LanguageDetectorCreateOptions","type":"dictionary","url":"#dictdef-languagedetectorcreateoptions"},
"#dictdef-languagedetectordetectoptions": {"displayText":"LanguageDetectorDetectOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"LanguageDetectorDetectOptions","type":"dictionary","url":"#dictdef-languagedetectordetectoptions"},
"#dictdef-translatorcreatecoreoptions": {"displayText":"TranslatorCreateCoreOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"TranslatorCreateCoreOptions","type":"dictionary","url":"#dictdef-translatorcreatecoreoptions"},
"#dictdef-translatorcreateoptions": {"displayText":"TranslatorCreateOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"TranslatorCreateOptions","type":"dictionary","url":"#dictdef-translatorcreateoptions"},
"#dictdef-translatortranslateoptions": {"displayText":"TranslatorTranslateOptions","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"TranslatorTranslateOptions","type":"dictionary","url":"#dictdef-translatortranslateoptions"},
"#dom-languagedetectionresult-confidence": {"displayText":"confidence","export":true,"for_":["LanguageDetectionResult"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"confidence","type":"dict-member","url":"#dom-languagedetectionresult-confidence"},
"#dom-languagedetectionresult-detectedlanguage": {"displayText":"detectedLanguage","export":true,"for_":["LanguageDetectionResult"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"detectedLanguage","type":"dict-member","url":"#dom-languagedetectionresult-detectedlanguage"},
"#dom-languagedetector-availability": {"displayText":"availability(options)","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"availability(options)","type":"method","url":"#dom-languagedetector-availability"},
"#dom-languagedetector-create": {"displayText":"create(options)","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"create(options)","type":"method","url":"#dom-languagedetector-create"},
"#dom-languagedetector-detect": {"displayText":"detect(input, options)","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"detect(input, options)","type":"method","url":"#dom-languagedetector-detect"},
"#dom-languagedetector-expectedinputlanguages": {"displayText":"expectedInputLanguages","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"expectedInputLanguages","type":"attribute","url":"#dom-languagedetector-expectedinputlanguages"},
"#dom-languagedetector-inputquota": {"displayText":"inputQuota","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"inputQuota","type":"attribute","url":"#dom-languagedetector-inputquota"},
"#dom-languagedetector-measureinputusage": {"displayText":"measureInputUsage(input, options)","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"measureInputUsage(input, options)","type":"method","url":"#dom-languagedetector-measureinputusage"},
"#dom-languagedetectorcreatecoreoptions-expectedinputlanguages": {"displayText":"expectedInputLanguages","export":true,"for_":["LanguageDetectorCreateCoreOptions"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"expectedInputLanguages","type":"dict-member","url":"#dom-languagedetectorcreatecoreoptions-expectedinputlanguages"},
"#dom-translator-availability": {"displayText":"availability(options)","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"availability(options)","type":"method","url":"#dom-translator-availability"},
"#dom-translator-create": {"displayText":"create(options)","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"create(options)","type":"method","url":"#dom-translator-create"},
"#dom-translator-inputquota": {"displayText":"inputQuota","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"inputQuota","type":"attribute","url":"#dom-translator-inputquota"},
"#dom-translator-measureinputusage": {"displayText":"measureInputUsage(input, options)","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"measureInputUsage(input, options)","type":"method","url":"#dom-translator-measureinputusage"},
"#dom-translator-sourcelanguage": {"displayText":"sourceLanguage","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"sourceLanguage","type":"attribute","url":"#dom-translator-sourcelanguage"},
"#dom-translator-targetlanguage": {"displayText":"targetLanguage","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"targetLanguage","type":"attribute","url":"#dom-translator-targetlanguage"},
"#dom-translator-translate": {"displayText":"translate(input, options)","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"translate(input, options)","type":"method","url":"#dom-translator-translate"},
"#dom-translator-translatestreaming": {"displayText":"translateStreaming(input, options)","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"translateStreaming(input, options)","type":"method","url":"#dom-translator-translatestreaming"},
"#dom-translatorcreatecoreoptions-sourcelanguage": {"displayText":"sourceLanguage","export":true,"for_":["TranslatorCreateCoreOptions"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"sourceLanguage","type":"dict-member","url":"#dom-translatorcreatecoreoptions-sourcelanguage"},
"#dom-translatorcreatecoreoptions-targetlanguage": {"displayText":"targetLanguage","export":true,"for_":["TranslatorCreateCoreOptions"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"targetLanguage","type":"dict-member","url":"#dom-translatorcreatecoreoptions-targetlanguage"},
"#download-the-language-detector-model": {"displayText":"download the language detector model","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"download the language detector model","type":"dfn","url":"#download-the-language-detector-model"},
"#download-the-translation-model": {"displayText":"download the translation model","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"download the translation model","type":"dfn","url":"#download-the-translation-model"},
"#initialize-the-language-detector-model": {"displayText":"initialize the language detector model","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"initialize the language detector model","type":"dfn","url":"#initialize-the-language-detector-model"},
"#initialize-the-translation-model": {"displayText":"initialize the translation model","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"initialize the translation model","type":"dfn","url":"#initialize-the-translation-model"},
"#language-arc": {"displayText":"language arc","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"language arc","type":"dfn","url":"#language-arc"},
"#language-arc-can-be-fulfilled-by-the-identity-translation": {"displayText":"can be fulfilled by the identity translation","export":true,"for_":["language arc"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"can be fulfilled by the identity translation","type":"dfn","url":"#language-arc-can-be-fulfilled-by-the-identity-translation"},
"#language-arc-overlaps": {"displayText":"overlaps","export":true,"for_":["language arc"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"overlaps","type":"dfn","url":"#language-arc-overlaps"},
"#language-arc-source-language": {"displayText":"source language","export":true,"for_":["language arc"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"source language","type":"dfn","url":"#language-arc-source-language"},
"#language-arc-target-language": {"displayText":"target language","export":true,"for_":["language arc"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"target language","type":"dfn","url":"#language-arc-target-language"},
"#languagedetector": {"displayText":"LanguageDetector","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"LanguageDetector","type":"interface","url":"#languagedetector"},
"#languagedetector-expected-input-languages": {"displayText":"expected input languages","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"expected input languages","type":"dfn","url":"#languagedetector-expected-input-languages"},
"#languagedetector-input-quota": {"displayText":"input quota","export":true,"for_":["LanguageDetector"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"input quota","type":"dfn","url":"#languagedetector-input-quota"},
"#measure-language-detector-input-usage": {"displayText":"measure language detector input usage","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"measure language detector input usage","type":"dfn","url":"#measure-language-detector-input-usage"},
"#measure-translator-input-usage": {"displayText":"measure translator input usage","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"measure translator input usage","type":"dfn","url":"#measure-translator-input-usage"},
"#permissiondef-language-detector": {"displayText":"language-detector","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"language-detector","type":"permission","url":"#permissiondef-language-detector"},
"#permissiondef-translator": {"displayText":"translator","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"translator","type":"permission","url":"#permissiondef-translator"},
"#translate": {"displayText":"translate","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"translate","type":"dfn","url":"#translate"},
"#translator": {"displayText":"Translator","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"Translator","type":"interface","url":"#translator"},
"#translator-input-quota": {"displayText":"input quota","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"input quota","type":"dfn","url":"#translator-input-quota"},
"#translator-language-arc-availabilities": {"displayText":"translator language arc availabilities","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"translator language arc availabilities","type":"dfn","url":"#translator-language-arc-availabilities"},
"#translator-source-language": {"displayText":"source language","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"source language","type":"dfn","url":"#translator-source-language"},
"#translator-target-language": {"displayText":"target language","export":true,"for_":["Translator"],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"target language","type":"dfn","url":"#translator-target-language"},
"#validate-and-canonicalize-language-detector-options": {"displayText":"validate and canonicalize language detector options","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"validate and canonicalize language detector options","type":"dfn","url":"#validate-and-canonicalize-language-detector-options"},
"#validate-and-canonicalize-translator-options": {"displayText":"validate and canonicalize translator options","export":true,"for_":[],"level":"","normative":true,"shortname":"translation","spec":"translation","status":"local","text":"validate and canonicalize translator options","type":"dfn","url":"#validate-and-canonicalize-translator-options"},
"https://dom.spec.whatwg.org/#abortcontroller-signal": {"displayText":"signal","export":true,"for_":["AbortController"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"signal","type":"dfn","url":"https://dom.spec.whatwg.org/#abortcontroller-signal"},
"https://dom.spec.whatwg.org/#abortsignal": {"displayText":"AbortSignal","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"AbortSignal","type":"interface","url":"https://dom.spec.whatwg.org/#abortsignal"},
"https://dom.spec.whatwg.org/#abortsignal-abort-reason": {"displayText":"abort reason","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"abort reason","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-abort-reason"},
"https://dom.spec.whatwg.org/#abortsignal-aborted": {"displayText":"aborted","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"aborted","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-aborted"},
"https://dom.spec.whatwg.org/#abortsignal-add": {"displayText":"add","export":true,"for_":["AbortSignal"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"add","type":"dfn","url":"https://dom.spec.whatwg.org/#abortsignal-add"},
"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal": {"displayText":"create a dependent abort signal","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"create a dependent abort signal","type":"dfn","url":"https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"displayText":"fully active","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"displayText":"in parallel","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": {"displayText":"associated Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"associated document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop": {"displayText":"event loop","export":true,"for_":["agent"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event loop","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": {"displayText":"relevant realm","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": {"displayText":"event loop","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"event loop","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": {"displayText":"queue a global task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a global task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"https://infra.spec.whatwg.org/#assert": {"displayText":"assert","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#code-point": {"displayText":"code point","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"code point","type":"dfn","url":"https://infra.spec.whatwg.org/#code-point"},
"https://infra.spec.whatwg.org/#implementation-defined": {"displayText":"implementation-defined","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"implementation-defined","type":"dfn","url":"https://infra.spec.whatwg.org/#implementation-defined"},
"https://infra.spec.whatwg.org/#iteration-break": {"displayText":"break","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"break","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-break"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-is-empty": {"displayText":"is empty","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"is empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-is-empty"},
"https://infra.spec.whatwg.org/#list-item": {"displayText":"item","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#list-item"},
"https://infra.spec.whatwg.org/#map-entry": {"displayText":"entry","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"entry","type":"dfn","url":"https://infra.spec.whatwg.org/#map-entry"},
"https://infra.spec.whatwg.org/#map-exists": {"displayText":"exist","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-getting-the-keys": {"displayText":"keys","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"keys","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"https://infra.spec.whatwg.org/#map-getting-the-values": {"displayText":"values","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"values","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"https://infra.spec.whatwg.org/#map-iterate": {"displayText":"for each","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#map-iterate"},
"https://infra.spec.whatwg.org/#map-key": {"displayText":"key","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"key","type":"dfn","url":"https://infra.spec.whatwg.org/#map-key"},
"https://infra.spec.whatwg.org/#map-sort-in-descending-order": {"displayText":"sort in descending order","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"sort in descending order","type":"dfn","url":"https://infra.spec.whatwg.org/#map-sort-in-descending-order"},
"https://infra.spec.whatwg.org/#map-value": {"displayText":"value","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"value","type":"dfn","url":"https://infra.spec.whatwg.org/#map-value"},
"https://infra.spec.whatwg.org/#ordered-map": {"displayText":"map","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"map","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-map"},
"https://infra.spec.whatwg.org/#ordered-set": {"displayText":"set","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#set-append": {"displayText":"append","export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string": {"displayText":"string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#string-length": {"displayText":"length","export":true,"for_":["string","JavaScript string","ASCII string","isomorphic string","scalar value string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"length","type":"dfn","url":"https://infra.spec.whatwg.org/#string-length"},
"https://infra.spec.whatwg.org/#tuple": {"displayText":"tuple","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"tuple","type":"dfn","url":"https://infra.spec.whatwg.org/#tuple"},
"https://streams.spec.whatwg.org/#readablestream": {"displayText":"ReadableStream","export":true,"for_":[],"level":"1","normative":true,"shortname":"streams","spec":"streams","status":"current","text":"ReadableStream","type":"interface","url":"https://streams.spec.whatwg.org/#readablestream"},
"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm": {"displayText":"realm","export":true,"for_":["ECMAScript"],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"realm","type":"dfn","url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm"},
"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#surrounding-agent": {"displayText":"surrounding agent","export":true,"for_":["ECMAScript"],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"surrounding agent","type":"dfn","url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#surrounding-agent"},
"https://tc39.es/ecma402/#sec-language-tags": {"displayText":"Unicode canonicalized locale identifier","export":true,"for_":[],"level":"402","normative":true,"shortname":"ecma","spec":"ecma-402","status":"anchor-block","text":"unicode canonicalized locale identifier","type":"dfn","url":"https://tc39.es/ecma402/#sec-language-tags"},
"https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit": {"displayText":"LookupMatchingLocaleByBestFit","export":true,"for_":[],"level":"402","normative":true,"shortname":"ecma","spec":"ecma-402","status":"anchor-block","text":"LookupMatchingLocaleByBestFit","type":"abstract-op","url":"https://tc39.es/ecma402/#sec-lookupmatchinglocalebybestfit"},
"https://w3c.github.io/webappsec-permissions-policy/#default-allowlist-self": {"displayText":"'self'","export":true,"for_":["default allowlist"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"'self'","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#default-allowlist-self"},
"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature": {"displayText":"policy-controlled feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"policy-controlled feature","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist": {"displayText":"default allowlist","export":true,"for_":["policy-controlled feature"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"default allowlist","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SecureContext": {"displayText":"SecureContext","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecureContext","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SecureContext"},
"https://webidl.spec.whatwg.org/#a-new-promise": {"displayText":"a new promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a new promise","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"https://webidl.spec.whatwg.org/#a-promise-rejected-with": {"displayText":"a promise rejected with","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise rejected with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org/#dfn-create-frozen-array": {"displayText":"creating a frozen array","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"creating a frozen array","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-create-frozen-array"},
"https://webidl.spec.whatwg.org/#domexception-name": {"displayText":"name","export":true,"for_":["DOMException"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"name","type":"dfn","url":"https://webidl.spec.whatwg.org/#domexception-name"},
"https://webidl.spec.whatwg.org/#idl-DOMException": {"displayText":"DOMException","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMException","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-double": {"displayText":"double","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-double"},
"https://webidl.spec.whatwg.org/#idl-frozen-array": {"displayText":"FrozenArray","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"FrozenArray","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-frozen-array"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-unrestricted-double": {"displayText":"unrestricted double","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unrestricted double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unrestricted-double"},
"https://webidl.spec.whatwg.org/#invalidstateerror": {"displayText":"InvalidStateError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"InvalidStateError","type":"exception","url":"https://webidl.spec.whatwg.org/#invalidstateerror"},
"https://webidl.spec.whatwg.org/#notallowederror": {"displayText":"NotAllowedError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"NotAllowedError","type":"exception","url":"https://webidl.spec.whatwg.org/#notallowederror"},
"https://webidl.spec.whatwg.org/#notreadableerror": {"displayText":"NotReadableError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"NotReadableError","type":"exception","url":"https://webidl.spec.whatwg.org/#notreadableerror"},
"https://webidl.spec.whatwg.org/#operationerror": {"displayText":"OperationError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"OperationError","type":"exception","url":"https://webidl.spec.whatwg.org/#operationerror"},
"https://webidl.spec.whatwg.org/#reject": {"displayText":"reject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"reject","type":"dfn","url":"https://webidl.spec.whatwg.org/#reject"},
"https://webidl.spec.whatwg.org/#resolve": {"displayText":"resolve","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"resolve","type":"dfn","url":"https://webidl.spec.whatwg.org/#resolve"},
"https://webidl.spec.whatwg.org/#this": {"displayText":"this","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
"https://webidl.spec.whatwg.org/#unknownerror": {"displayText":"UnknownError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"UnknownError","type":"exception","url":"https://webidl.spec.whatwg.org/#unknownerror"},
"https://webmachinelearning.github.io/writing-assistance-apis/#ai-task-source": {"displayText":"AI task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"ai task source","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#ai-task-source"},
"https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback": {"displayText":"CreateMonitorCallback","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"CreateMonitorCallback","type":"callback","url":"https://webmachinelearning.github.io/writing-assistance-apis/#callbackdef-createmonitorcallback"},
"https://webmachinelearning.github.io/writing-assistance-apis/#compute-ai-model-availability": {"displayText":"compute AI model availability","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"compute ai model availability","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#compute-ai-model-availability"},
"https://webmachinelearning.github.io/writing-assistance-apis/#compute-language-availability": {"displayText":"compute language availability","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"compute language availability","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#compute-language-availability"},
"https://webmachinelearning.github.io/writing-assistance-apis/#convert-error-information-into-an-exception-object": {"displayText":"convert error information into an exception object","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"convert error information into an exception object","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#convert-error-information-into-an-exception-object"},
"https://webmachinelearning.github.io/writing-assistance-apis/#create-an-ai-model-object": {"displayText":"create an AI model object","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"create an ai model object","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#create-an-ai-model-object"},
"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel": {"displayText":"DestroyableModel","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"DestroyableModel","type":"interface","url":"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel"},
"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel-destruction-abort-controller": {"displayText":"destruction abort controller","export":true,"for_":["DestroyableModel"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"destruction abort controller","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#destroyablemodel-destruction-abort-controller"},
"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available": {"displayText":"\"available\"","export":true,"for_":["Availability"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"\"available\"","type":"enum-value","url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-available"},
"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable": {"displayText":"\"downloadable\"","export":true,"for_":["Availability"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"\"downloadable\"","type":"enum-value","url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloadable"},
"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloading": {"displayText":"\"downloading\"","export":true,"for_":["Availability"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"\"downloading\"","type":"enum-value","url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-downloading"},
"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-unavailable": {"displayText":"\"unavailable\"","export":true,"for_":["Availability"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"\"unavailable\"","type":"enum-value","url":"https://webmachinelearning.github.io/writing-assistance-apis/#dom-availability-unavailable"},
"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information": {"displayText":"DOMException error information","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"domexception error information","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information"},
"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-details": {"displayText":"details","export":true,"for_":["DOMException error information"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"details","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-details"},
"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-name": {"displayText":"name","export":true,"for_":["DOMException error information"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"name","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#domexception-error-information-name"},
"https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability": {"displayText":"Availability","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"Availability","type":"enum","url":"https://webmachinelearning.github.io/writing-assistance-apis/#enumdef-availability"},
"https://webmachinelearning.github.io/writing-assistance-apis/#error-information": {"displayText":"error information","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"error information","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#error-information"},
"https://webmachinelearning.github.io/writing-assistance-apis/#get-a-streaming-ai-model-result": {"displayText":"get a streaming AI model result","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"get a streaming ai model result","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-a-streaming-ai-model-result"},
"https://webmachinelearning.github.io/writing-assistance-apis/#get-an-aggregated-ai-model-result": {"displayText":"get an aggregated AI model result","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"get an aggregated ai model result","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-an-aggregated-ai-model-result"},
"https://webmachinelearning.github.io/writing-assistance-apis/#get-the-language-availabilities-partition": {"displayText":"get the language availabilities partition","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"get the language availabilities partition","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#get-the-language-availabilities-partition"},
"https://webmachinelearning.github.io/writing-assistance-apis/#measure-ai-model-input-usage": {"displayText":"measure AI model input usage","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"measure ai model input usage","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#measure-ai-model-input-usage"},
"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information": {"displayText":"quota exceeded error information","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"quota exceeded error information","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information"},
"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-quota": {"displayText":"quota","export":true,"for_":["quota exceeded error information"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"quota","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-quota"},
"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-requested": {"displayText":"requested","export":true,"for_":["quota exceeded error information"],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"requested","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#quota-exceeded-error-information-requested"},
"https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags": {"displayText":"validate and canonicalize language tags","export":true,"for_":[],"level":"1","normative":true,"shortname":"writing-assistance-apis","spec":"writing-assistance-apis","status":"current","text":"validate and canonicalize language tags","type":"dfn","url":"https://webmachinelearning.github.io/writing-assistance-apis/#validate-and-canonicalize-language-tags"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>